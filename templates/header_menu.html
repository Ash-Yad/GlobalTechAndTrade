<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}GlobalTechAndTrade | IT Solutions & Import Export Services{% endblock %}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="GlobalTechAndTrade offers professional IT solutions, mobile app development, web development, and import/export services. Serving businesses in India, Africa, and Middle East.">
    <meta name="keywords" content="IT solutions, mobile app development, web development, import export, software development, India, Africa, Zambia, global trade, custom software, ERP, CRM">
    <meta name="author" content="GlobalTechAndTrade">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.globaltechandtrade.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.globaltechandtrade.com/">
    <meta property="og:title" content="GlobalTechAndTrade | IT Solutions & Import Export Services">
    <meta property="og:description" content="Professional IT solutions and global trade services. Mobile apps, web development, and import/export across India, Africa & Middle East.">
    <meta property="og:image" content="https://www.globaltechandtrade.com/static/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.globaltechandtrade.com/">
    <meta name="twitter:title" content="GlobalTechAndTrade | IT Solutions & Import Export Services">
    <meta name="twitter:description" content="Professional IT solutions and global trade services. Mobile apps, web development, and import/export across India, Africa & Middle East.">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/favicon.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/favicon.png') }}">

    <!-- Schema.org Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "GlobalTechAndTrade",
        "alternateName": "GTT",
        "url": "https://www.globaltechandtrade.com",
        "logo": "https://www.globaltechandtrade.com/static/images/logo.png",
        "description": "Professional IT solutions and global trade services. Mobile apps, web development, and import/export across India, Africa & Middle East.",
        "foundingDate": "2021",
        "numberOfEmployees": {
            "@type": "QuantitativeValue",
            "minValue": 25,
            "maxValue": 50
        },
        "areaServed": ["India", "Zambia", "Africa", "Middle East"],
        "sameAs": [
            "https://www.linkedin.com/company/globaltechandtrade",
            "https://twitter.com/globaltechandtrade"
        ],
        "contactPoint": [
            {
                "@type": "ContactPoint",
                "telephone": "+91-9027125341",
                "contactType": "sales",
                "areaServed": "IN",
                "availableLanguage": ["English", "Hindi"]
            },
            {
                "@type": "ContactPoint",
                "telephone": "+260-977588581",
                "contactType": "sales",
                "areaServed": "ZM",
                "availableLanguage": "English"
            }
        ],
        "address": [
            {
                "@type": "PostalAddress",
                "streetAddress": "Sector 63",
                "addressLocality": "Noida",
                "addressRegion": "Uttar Pradesh",
                "postalCode": "201301",
                "addressCountry": "IN"
            },
            {
                "@type": "PostalAddress",
                "streetAddress": "Plot #10424/4, Cassanova Court, Chainama",
                "addressLocality": "Lusaka",
                "addressCountry": "ZM"
            }
        ],
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Services",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Mobile App Development",
                        "description": "iOS and Android app development using React Native, Flutter"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Web Application Development",
                        "description": "Custom web applications using React, Node.js, Python"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Import Export Services",
                        "description": "International trade and logistics between India and Africa"
                    }
                }
            ]
        }
    }
    </script>

    <!-- Local Business Schema for India Office -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "GlobalTechAndTrade - India",
        "image": "https://www.globaltechandtrade.com/static/images/logo.png",
        "telephone": "+91-9027125341",
        "email": "info@globaltechandtrade.com",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Sector 63",
            "addressLocality": "Noida",
            "addressRegion": "Uttar Pradesh",
            "postalCode": "201301",
            "addressCountry": "IN"
        },
        "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            "opens": "09:00",
            "closes": "18:00"
        },
        "priceRange": "$$"
    }
    </script>

    <!-- Local Business Schema for Zambia Office -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "GlobalTechAndTrade - Zambia",
        "image": "https://www.globaltechandtrade.com/static/images/logo.png",
        "telephone": "+260-977588581",
        "email": "info@globaltechandtrade.com",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Plot #10424/4, Cassanova Court, Chainama",
            "addressLocality": "Lusaka",
            "addressCountry": "ZM"
        },
        "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
            "opens": "08:00",
            "closes": "17:00"
        },
        "priceRange": "$$"
    }
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CXVT183KZE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-CXVT183KZE');
        
        // Track key events for analytics
        document.addEventListener('DOMContentLoaded', function() {
            // Track Book Demo button clicks
            document.querySelectorAll('.book-free-demo-trigger').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    gtag('event', 'book_demo_click', {
                        'event_category': 'engagement',
                        'event_label': 'Book Demo Button'
                    });
                });
            });
            
            // Track contact link clicks
            document.querySelectorAll('a[href="/contact"]').forEach(function(link) {
                link.addEventListener('click', function() {
                    gtag('event', 'contact_click', {
                        'event_category': 'engagement',
                        'event_label': 'Contact Page Link'
                    });
                });
            });
            
            // Track phone number clicks
            document.querySelectorAll('a[href^="tel:"]').forEach(function(link) {
                link.addEventListener('click', function() {
                    gtag('event', 'phone_click', {
                        'event_category': 'contact',
                        'event_label': link.getAttribute('href')
                    });
                });
            });
            
            // Track email clicks
            document.querySelectorAll('a[href^="mailto:"]').forEach(function(link) {
                link.addEventListener('click', function() {
                    gtag('event', 'email_click', {
                        'event_category': 'contact',
                        'event_label': 'Email Link'
                    });
                });
            });
            
            // Track WhatsApp clicks
            document.querySelectorAll('a[href*="wa.me"]').forEach(function(link) {
                link.addEventListener('click', function() {
                    gtag('event', 'whatsapp_click', {
                        'event_category': 'contact',
                        'event_label': 'WhatsApp Link'
                    });
                });
            });
            
            // Track service page visits
            document.querySelectorAll('a[href="/it-solutions"], a[href="/import-export"]').forEach(function(link) {
                link.addEventListener('click', function() {
                    gtag('event', 'service_interest', {
                        'event_category': 'engagement',
                        'event_label': link.getAttribute('href')
                    });
                });
            });
        });
    </script>

    <!-- Tailwind CSS - Production Build -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        /* GLOBAL FIX: Force all page content into a single stacking context */
        body > *:not(#chat-toggle):not(#chat-backdrop):not(#chat-window):not(script):not(style):not(nav) {
            position: relative;
            z-index: 0 !important;
        }
        
        /* Wrap main content in a lower layer */
        main, section, .hero-section, article, aside {
            z-index: 0 !important;
        }
        
        /* Reset z-index on elements that shouldn't create stacking contexts above chatbot */
        /* Exclude nav dropdowns from this reset */
        main [class*="z-10"], main [class*="z-20"], main [class*="z-30"], main [class*="z-40"], main [class*="z-50"],
        section [class*="z-10"], section [class*="z-20"], section [class*="z-30"], section [class*="z-40"], section [class*="z-50"] {
            z-index: 0 !important;
        }
        
        /* Ensure nav dropdowns work properly */
        nav, nav * {
            z-index: auto;
        }
        #navbar {
            z-index: 50 !important;
        }
        #resources-menu, #lang-menu {
            z-index: 9999 !important;
        }
        
        /* Force chatbot elements to absolute top layer - using max safe integer */
        #chat-toggle {
            z-index: 2147483647 !important;
            position: fixed !important;
        }
        #chat-backdrop {
            z-index: 2147483646 !important;
            position: fixed !important;
        }
        #chat-window {
            z-index: 2147483647 !important;
            position: fixed !important;
            isolation: isolate !important;
            contain: layout paint !important;
        }
        
        /* Ensure chatbot has completely opaque backgrounds */
        #chat-window,
        #chat-window .chatbot-container {
            background-color: #ffffff !important;
            background: #ffffff !important;
        }
        
        /* Send button must stay blue */
        #chat-form button[type="submit"] {
            background: linear-gradient(to bottom right, #2563eb, #1d4ed8) !important;
            background-color: #2563eb !important;
            color: white !important;
        }
        #chat-form button[type="submit"]:hover {
            background: linear-gradient(to bottom right, #1d4ed8, #1e40af) !important;
        }
        
        /* Chat scrollbar styling - always visible */
        #chat-messages {
            overflow-y: scroll !important;
        }
        #chat-messages::-webkit-scrollbar {
            width: 8px;
            display: block !important;
        }
        #chat-messages::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 4px;
        }
        #chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #3b82f6, #1d4ed8);
            border-radius: 4px;
            min-height: 40px;
        }
        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #2563eb, #1e40af);
        }
        
        /* Modern Professional Theme */
        .gradient-text {
            background: linear-gradient(135deg, #0052CC 0%, #003D99 50%, #0052CC 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 8s ease infinite;
        }

        .gradient-text-light {
            background: linear-gradient(135deg, #60A5FA, #3B82F6, #60A5FA);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient 6s ease infinite;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #0052CC 0%, #003D99 100%);
        }

        .gradient-bg-animated {
            background: linear-gradient(135deg, #0052CC, #003D99, #0052CC);
            background-size: 200% 200%;
            animation: gradient 8s ease infinite;
        }

        /* Premium Glass Morphism */
        .glass {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .glass-dark {
            background: rgba(10, 22, 40, 0.85);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Navigation */
        .nav-blur {
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
        }

        .active-nav {
            color: #0052CC !important;
            position: relative;
        }

        .active-nav::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: #0052CC;
            border-radius: 50%;
        }

        /* Premium Card Effects */
        .card-hover {
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 82, 204, 0.25);
        }

        .hover-lift {
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .hover-lift:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 40px -15px rgba(0, 82, 204, 0.3);
        }

        /* Glow Effects */
        .glow-primary {
            box-shadow: 0 0 30px rgba(0, 82, 204, 0.3);
        }

        .glow-accent {
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
        }

        /* Modern Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, #0052CC, #003D99);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-accent {
            background: linear-gradient(135deg, #FF6B35, #E85A24);
            position: relative;
            overflow: hidden;
        }

        /* Shimmer Effect */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        /* Section Dividers */
        .section-divider {
            position: relative;
        }

        .section-divider::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #0052CC, #FF6B35);
            border-radius: 2px;
        }

        /* Footer Glow */
        .footer-glow {
            position: relative;
        }

        .footer-glow::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, #0052CC, #FF6B35, #0052CC, transparent);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #F1F5F9;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #0052CC, #003D99);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #003D99, #0052CC);
        }

        /* Loading Animation */
        .loading-dots div {
            animation: loading 1.4s infinite;
        }

        @keyframes loading {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Smooth Transitions */
        * {
            transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
            transition-duration: 0.2s;
            transition-timing-function: ease;
        }

        /* Focus Styles */
        *:focus-visible {
            outline: 2px solid #0052CC;
            outline-offset: 2px;
        }

        /* Text Selection */
        ::selection {
            background: #0052CC;
            color: white;
        }

        /* Mesh Background */
        .mesh-bg {
            background-color: #0A1628;
            background-image: 
                radial-gradient(at 40% 20%, rgba(0, 82, 204, 0.3) 0px, transparent 50%),
                radial-gradient(at 80% 0%, rgba(255, 107, 53, 0.2) 0px, transparent 50%),
                radial-gradient(at 0% 50%, rgba(0, 61, 153, 0.3) 0px, transparent 50%),
                radial-gradient(at 80% 50%, rgba(0, 82, 204, 0.2) 0px, transparent 50%),
                radial-gradient(at 0% 100%, rgba(255, 107, 53, 0.15) 0px, transparent 50%);
        }

        /* Noise Texture Overlay */
        .noise-overlay::after {
            content: '';
            position: absolute;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
        }

        /* Stats Counter Animation */
        .stat-number {
            font-variant-numeric: tabular-nums;
        }

        /* Floating Elements */
        .float-element {
            animation: float 6s ease-in-out infinite;
        }

        .float-element-delayed {
            animation: float 6s ease-in-out infinite;
            animation-delay: -3s;
        }
    </style>

    <!-- Additional CSS Block -->
    {% block styles %}{% endblock %}
</head>

<body class="bg-slate-50 text-slate-900 font-sans antialiased overflow-x-hidden">

    <!-- Loading Spinner (hidden by default) -->
    <div id="loading-spinner" class="fixed inset-0 bg-white/80 backdrop-blur-sm z-[100] hidden items-center justify-center">
        <div class="text-center">
            <div class="w-20 h-20 border-4 border-primary/30 border-t-primary rounded-full animate-spin mx-auto"></div>
            <p class="mt-4 text-primary font-bold">Loading...</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-blur bg-white/80 border-b border-slate-100 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">

                <!-- Logo -->
                <a href="/" class="flex items-center gap-2 flex-shrink-0">
                    <div class="w-9 h-9 sm:w-10 sm:h-10 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center shadow-lg flex-shrink-0">
                        <i class="fas fa-globe text-white text-sm sm:text-base"></i>
                    </div>
                    <span class="text-sm sm:text-lg md:text-xl font-black tracking-tight text-slate-900">
                        GLOBAL<span class="text-primary italic">TECH</span><span class="text-slate-700">ANDTRADE</span>
                    </span>
                </a>

                <!-- Desktop Menu - Clean navigation -->
                <div class="hidden md:flex items-center gap-1">
                    <a href="/" class="px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:text-primary transition-all {{ 'active-nav' if active == 'home' }}">
                        Home
                    </a>

                    <a href="/about" class="px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:text-primary transition-all {{ 'active-nav' if active == 'about' }}">
                        About Us
                    </a>

                    <a href="/it-solutions" class="px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:text-primary transition-all {{ 'active-nav' if active == 'it-solutions' }}">
                        IT Solutions
                    </a>

                    <a href="/import-export" class="px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:text-primary transition-all {{ 'active-nav' if active == 'import-export' }}">
                        Import/Export
                    </a>

                    <!-- Resources Dropdown -->
                    <div class="relative" id="resources-dropdown" style="z-index: 100;">
                        <button class="px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:text-primary transition-all flex items-center gap-1 {{ 'active-nav' if active in ['blog', 'case-studies', 'faq', 'resources'] }}" id="resources-btn" type="button">
                            Resources
                            <i class="fas fa-chevron-down text-[10px] ml-1"></i>
                        </button>
                        <div class="absolute left-0 top-full mt-2 w-48 bg-white rounded-xl shadow-lg border border-slate-200 py-2 hidden" id="resources-menu" style="z-index: 9999;">
                            <a href="/blog" class="block px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-primary transition-colors">
                                Blog & Insights
                            </a>
                            <a href="/case-studies" class="block px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-primary transition-colors">
                                Case Studies
                            </a>
                            <a href="/faq" class="block px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-primary transition-colors">
                                FAQ
                            </a>
                        </div>
                    </div>

                    <!-- Contact -->
                    <a href="/contact" class="px-4 py-2 rounded-xl text-sm font-bold text-slate-600 hover:text-primary transition-all {{ 'active-nav' if active == 'contact' }}">
                        Contact
                    </a>
                </div>

                <!-- Right Section - Language & Book Demo -->
                <div class="flex items-center gap-2 sm:gap-4">
                    <!-- Language Selector -->
                    <div class="relative hidden sm:block" id="lang-dropdown">
                        <button class="flex items-center gap-1.5 px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-sm font-semibold text-slate-700 transition-all" id="lang-btn">
                            <i class="fas fa-globe text-primary"></i>
                            <span id="current-lang">EN</span>
                            <i class="fas fa-chevron-down text-xs text-slate-400"></i>
                        </button>
                        <div class="absolute right-0 top-full mt-2 w-40 bg-white rounded-xl shadow-xl border border-slate-100 py-2 hidden" id="lang-menu" style="z-index: 9999;">
                            <button class="lang-option w-full px-4 py-2 text-left text-sm font-medium text-slate-700 hover:bg-primary/5 hover:text-primary flex items-center gap-3" data-lang="en">
                                <span class="text-lg">üá¨üáß</span> English
                            </button>
                            <button class="lang-option w-full px-4 py-2 text-left text-sm font-medium text-slate-700 hover:bg-primary/5 hover:text-primary flex items-center gap-3" data-lang="fr">
                                <span class="text-lg">üá´üá∑</span> Fran√ßais
                            </button>
                            <button class="lang-option w-full px-4 py-2 text-left text-sm font-medium text-slate-700 hover:bg-primary/5 hover:text-primary flex items-center gap-3" data-lang="sw">
                                <span class="text-lg">üá∞üá™</span> Kiswahili
                            </button>
                            <button class="lang-option w-full px-4 py-2 text-left text-sm font-medium text-slate-700 hover:bg-primary/5 hover:text-primary flex items-center gap-3" data-lang="hi">
                                <span class="text-lg">üáÆüá≥</span> ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä
                            </button>
                        </div>
                    </div>
                    
                    <!-- Book Demo Button -->
                    <a href="#" class="book-free-demo-trigger relative hidden md:flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 hover:from-pink-500 hover:via-red-500 hover:to-orange-500 text-white text-sm font-black rounded-full shadow-lg shadow-orange-500/40 hover:shadow-xl hover:shadow-red-500/50 hover:scale-105 transition-all duration-300 group animate-pulse hover:animate-none">
                        <span class="absolute -top-1 -right-1 flex h-3 w-3">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-yellow-300"></span>
                        </span>
                        <i class="fas fa-fire text-yellow-300 animate-bounce"></i>
                        <span class="tracking-wide">Book Demo</span>
                        <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </a>

                    <!-- Mobile Menu Button -->
                    <button class="md:hidden w-10 h-10 flex items-center justify-center bg-slate-100 rounded-xl text-slate-900 hover:bg-primary hover:text-white transition-all" id="mobile-menu-btn">
                        <i class="fas fa-bars-staggered"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu - Simplified with direct links -->
        <div class="md:hidden hidden bg-white border-t border-slate-100 animate-slide-down" id="mobile-menu">
            <div class="px-6 py-8 space-y-4 max-h-[80vh] overflow-y-auto">
                <a href="/" class="block text-xl font-bold text-slate-900 hover:text-primary transition-colors">
                    <i class="fas fa-home mr-2 text-primary"></i>Home
                </a>

                <a href="/about" class="block text-xl font-bold text-slate-900 hover:text-primary transition-colors">
                    <i class="fas fa-info-circle mr-2 text-secondary"></i>About
                </a>

                <!-- IT Solutions Direct Link -->
                <a href="/it-solutions" class="block text-xl font-bold text-slate-900 hover:text-primary transition-colors">
                    <i class="fas fa-microchip mr-2 text-primary"></i>IT Solutions
                </a>

                <!-- Import/Export Direct Link (only once) -->
                <a href="/import-export" class="block text-xl font-bold text-slate-900 hover:text-primary transition-colors">
                    <i class="fas fa-ship mr-2 text-secondary"></i>Import/Export
                </a>

                <!-- Resources Section -->
                <div class="pt-2">
                    <p class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">Resources</p>
                    <div class="space-y-2 pl-2">
                        <a href="/blog" class="block text-lg font-medium text-slate-700 hover:text-primary transition-colors">
                            <i class="fas fa-newspaper mr-2 text-primary"></i>Blog & Insights
                        </a>
                        <a href="/case-studies" class="block text-lg font-medium text-slate-700 hover:text-primary transition-colors">
                            <i class="fas fa-briefcase mr-2 text-accent"></i>Case Studies
                        </a>
                        <a href="/faq" class="block text-lg font-medium text-slate-700 hover:text-primary transition-colors">
                            <i class="fas fa-question-circle mr-2 text-green-600"></i>FAQ
                        </a>
                    </div>
                </div>

                <!-- Contact us -->
                <a href="/contact" class="block text-xl font-bold text-slate-900 hover:text-primary transition-colors">
                    <i class="fas fa-envelope mr-2 text-primary"></i>Contact us
                </a>

                <div class="pt-4 border-t border-slate-200">
                    <a href="#" class="book-free-demo-trigger inline-block w-full py-4 bg-accent text-white text-center rounded-2xl font-bold hover:bg-orange-600 hover:-translate-y-0.5 transition-all">
                        <i class="fas fa-calendar-check mr-2"></i>Book Free Demo
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Book Free Demo Modal - Enhanced Modern Design -->
    <div id="book-demo-modal" class="fixed inset-0 z-[60] hidden items-center justify-center p-2 sm:p-4 bg-dark/80 backdrop-blur-md overflow-y-auto" aria-hidden="true">
        <div class="bg-white rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-scale-in my-4 sm:my-0 relative" role="dialog" aria-labelledby="book-demo-title">
            <!-- Close Button - Always Visible on All Devices -->
            <button type="button" class="book-demo-close absolute top-3 right-3 z-[80] w-10 h-10 rounded-full bg-white/90 shadow-lg border border-slate-200 flex items-center justify-center text-slate-700 hover:text-red-500 hover:bg-red-50 transition-all" aria-label="Close" style="display: flex !important;">
                <i class="fas fa-times text-lg"></i>
            </button>
            <!-- Header with Gradient -->
            <div class="relative bg-gradient-to-r from-primary to-secondary p-4 sm:p-6 pb-6 sm:pb-8 pt-14">
                <div class="flex items-center gap-4">
                    <div class="w-14 h-14 rounded-2xl bg-white/20 flex items-center justify-center">
                        <i class="fas fa-calendar-check text-2xl text-white"></i>
                    </div>
                    <div>
                        <h2 id="book-demo-title" class="text-2xl font-black text-white">Book Free Consultation</h2>
                        <p class="text-white/80 text-sm">Get expert advice for your project</p>
                    </div>
                </div>
                <!-- Trust Badges -->
                <div class="flex flex-wrap gap-3 mt-4">
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/20 text-white text-xs font-semibold">
                        <i class="fas fa-check-circle"></i> Free Consultation
                    </span>
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/20 text-white text-xs font-semibold">
                        <i class="fas fa-clock"></i> Response in 24hrs
                    </span>
                    <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-white/20 text-white text-xs font-semibold">
                        <i class="fas fa-shield-alt"></i> No Commitment
                    </span>
                </div>
            </div>
            
            <!-- Form -->
            <form id="book-demo-form" class="p-6 space-y-5" action="https://formsubmit.co/info@globaltechandtrade.com" method="POST">
                <input type="hidden" name="_subject" value="Book Free Demo Request">
                <input type="hidden" name="_template" value="table">
                <input type="hidden" name="_next" id="demo-next" value="">
                <input type="hidden" name="_replyto" id="demo-email-reply">
                <input type="hidden" name="_autoresponse" value="Thank you for requesting a free demo with GlobalTechAndTrade. We have received your details and our team will get back to you shortly. If you have any immediate questions, you can reach us at info@globaltechandtrade.com or +91 9027125341. ‚Äî GlobalTechAndTrade">
                
                <!-- Two Column Layout -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="col-span-2 sm:col-span-1">
                        <label for="demo-name" class="block text-sm font-bold text-slate-700 mb-2">
                            <i class="fas fa-user text-primary mr-1.5"></i>Full Name <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="demo-name" name="name" required placeholder="John Doe"
                               class="w-full px-4 py-3.5 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white focus:ring-4 focus:ring-primary/10 outline-none transition-all text-slate-800 placeholder-slate-400">
                    </div>
                    <div class="col-span-2 sm:col-span-1">
                        <label for="demo-location" class="block text-sm font-bold text-slate-700 mb-2">
                            <i class="fas fa-map-marker-alt text-primary mr-1.5"></i>Location <span class="text-red-500">*</span>
                        </label>
                        <input type="text" id="demo-location" name="location" required placeholder="City, Country"
                               class="w-full px-4 py-3.5 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white focus:ring-4 focus:ring-primary/10 outline-none transition-all text-slate-800 placeholder-slate-400">
                    </div>
                </div>
                
                <div>
                    <label for="demo-related" class="block text-sm font-bold text-slate-700 mb-2">
                        <i class="fas fa-project-diagram text-primary mr-1.5"></i>What do you need help with?
                    </label>
                    <select id="demo-related" name="demo_related" 
                            class="w-full px-4 py-3.5 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white focus:ring-4 focus:ring-primary/10 outline-none transition-all text-slate-800 appearance-none cursor-pointer"
                            style="background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 4 5\"><path fill=\"%23667085\" d=\"M2 0L0 2h4zm0 5L0 3h4z\"/></svg>'); background-repeat: no-repeat; background-position: right 1rem center; background-size: 0.65rem;">
                        <option value="">Select a service...</option>
                        <option value="Mobile App Development">Mobile App Development</option>
                        <option value="Web Application">Web Application</option>
                        <option value="E-Commerce Platform">E-Commerce Platform</option>
                        <option value="Custom Software">Custom Software / ERP / CRM</option>
                        <option value="Import/Export Services">Import/Export Services</option>
                        <option value="Trade & Logistics">Trade & Logistics</option>
                        <option value="IT Consulting">IT Consulting</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="col-span-2 sm:col-span-1">
                        <label for="demo-email" class="block text-sm font-bold text-slate-700 mb-2">
                            <i class="fas fa-envelope text-primary mr-1.5"></i>Email <span class="text-red-500">*</span>
                        </label>
                        <input type="email" id="demo-email" name="email" required placeholder="you@company.com"
                               class="w-full px-4 py-3.5 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white focus:ring-4 focus:ring-primary/10 outline-none transition-all text-slate-800 placeholder-slate-400">
                    </div>
                    <div class="col-span-2 sm:col-span-1">
                        <label for="demo-phone" class="block text-sm font-bold text-slate-700 mb-2">
                            <i class="fas fa-phone-alt text-primary mr-1.5"></i>Phone <span class="text-red-500">*</span>
                        </label>
                        <input type="tel" id="demo-phone" name="phone" required placeholder="+91 98765 43210"
                               class="w-full px-4 py-3.5 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white focus:ring-4 focus:ring-primary/10 outline-none transition-all text-slate-800 placeholder-slate-400">
                    </div>
                </div>
                
                
                <!-- Success/Error Messages -->
                <div id="book-demo-success" class="hidden p-4 bg-green-50 border-2 border-green-200 rounded-xl text-green-800 text-sm font-medium">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-check text-green-600"></i>
                        </div>
                        <div>
                            <p class="font-bold">Request Submitted Successfully!</p>
                            <p class="text-green-600">We'll get back to you within 24 hours.</p>
                        </div>
                    </div>
                </div>
                <div id="book-demo-error" class="hidden p-4 bg-red-50 border-2 border-red-200 rounded-xl text-red-800 text-sm font-medium">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-exclamation text-red-600"></i>
                        </div>
                        <div>
                            <p class="font-bold">Something went wrong</p>
                            <p class="text-red-600">Please try again or email info@globaltechandtrade.com</p>
                        </div>
                    </div>
                </div>
                
                <!-- Submit and Close Buttons -->
                <div class="pt-2 flex flex-col sm:flex-row gap-3">
                    <button type="submit" id="book-demo-submit-btn" class="flex-1 group relative px-6 py-4 bg-gradient-to-r from-accent to-orange-500 hover:from-orange-500 hover:to-accent text-white font-bold rounded-xl shadow-lg shadow-accent/30 hover:shadow-xl hover:-translate-y-0.5 transition-all overflow-hidden">
                        <span class="relative z-10 flex items-center justify-center gap-2">
                            <i class="fas fa-paper-plane"></i>
                            Submit Request
                            <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                        </span>
                    </button>
                    <button type="button" class="book-demo-close sm:w-auto px-6 py-4 bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold rounded-xl transition-all flex items-center justify-center gap-2">
                        <i class="fas fa-times"></i>
                        Close
                    </button>
                </div>
                
                <!-- Footer Note -->
                <p class="text-center text-xs text-slate-400 pt-2">
                    <i class="fas fa-lock mr-1"></i>
                    Your information is secure and will never be shared.
                </p>
            </form>
        </div>
    </div>

    <!-- Main Content -->
    <main class="pt-20 min-h-screen">
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="fixed top-24 right-4 z-50 w-96 space-y-4">
                    {% for category, message in messages %}
                        <div class="bg-white border-l-4 border-{{ 'primary' if category == 'success' else 'red' }}-500 rounded-lg shadow-2xl p-4 animate-slide-up hover-scale" role="alert">
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-{{ 'check-circle' if category == 'success' else 'exclamation-circle' }} text-{{ 'primary' if category == 'success' else 'red' }}-500 text-xl"></i>
                                </div>
                                <div class="ml-3 flex-1">
                                    <p class="text-sm font-bold text-slate-800">{{ message }}</p>
                                </div>
                                <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-slate-400 hover:text-slate-600">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-300 pt-20 pb-12 footer-glow">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Main Footer Grid -->
            <div class="grid lg:grid-cols-12 gap-12 lg:gap-16 mb-16">

                <!-- Company Info -->
                <div class="lg:col-span-4">
                    <div class="flex items-center gap-3 mb-8">
                        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="GlobalTechAndTrade" class="h-12 w-auto brightness-0 invert">
                    </div>
                    <p class="text-slate-400 text-sm leading-relaxed mb-8 max-w-sm">
                        Bridging continents through technology and trade. Your trusted partner for IT innovation and global commerce since 2021.
                    </p>
                    <div class="flex gap-3">
                        <a href="https://www.linkedin.com/company/globaltechandtrade" target="_blank" rel="noopener" class="w-11 h-11 rounded-xl bg-slate-800 flex items-center justify-center text-white hover:bg-[#0077B5] hover:-translate-y-1 transition-all" title="Follow us on LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.facebook.com/globaltechandtrade" target="_blank" rel="noopener" class="w-11 h-11 rounded-xl bg-slate-800 flex items-center justify-center text-white hover:bg-[#1877F2] hover:-translate-y-1 transition-all" title="Follow us on Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.instagram.com/globaltechandtrade" target="_blank" rel="noopener" class="w-11 h-11 rounded-xl bg-slate-800 flex items-center justify-center text-white hover:bg-gradient-to-br hover:from-[#833AB4] hover:via-[#FD1D1D] hover:to-[#F77737] hover:-translate-y-1 transition-all" title="Follow us on Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://wa.me/919027125341?text=Hello%20GlobalTechAndTrade!%20I%27m%20interested%20in%20your%20services." target="_blank" rel="noopener" class="w-11 h-11 rounded-xl bg-green-500/20 text-green-400 flex items-center justify-center hover:bg-green-500 hover:text-white hover:-translate-y-1 transition-all" title="Chat on WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>

                <!-- India Office -->
                <div class="lg:col-span-3">
                    <h4 class="text-xs font-black text-primary uppercase tracking-[0.3em] mb-6 flex items-center gap-2">
                        <span class="w-1.5 h-1.5 bg-primary rounded-full"></span>
                        India HQ
                    </h4>
                    <p class="text-xs text-slate-400 mb-4">IT Solutions & Trade</p>
                    <div class="space-y-5">
                        <div class="flex gap-4 group">
                            <i class="fas fa-map-marker-alt text-primary mt-1 group-hover:scale-110 transition-transform"></i>
                            <p class="text-sm text-slate-300">
                                Sector 63, Noida,<br>
                                Uttar Pradesh, India 201301
                            </p>
                        </div>
                        <div class="flex gap-4 group">
                            <i class="fas fa-phone-alt text-primary mt-1 group-hover:scale-110 transition-transform"></i>
                            <span class="text-sm font-bold text-white">+91 9027125341</span>
                        </div>
                        <div class="flex gap-4 group">
                            <i class="fas fa-envelope text-primary mt-1 group-hover:scale-110 transition-transform"></i>
                            <a href="mailto:info@globaltechandtrade.com" class="text-sm font-bold text-white hover:text-primary transition-colors">info@globaltechandtrade.com</a>
                        </div>
                    </div>
                </div>

                <!-- Zambia Office -->
                <div class="lg:col-span-3">
                    <h4 class="text-xs font-black text-secondary uppercase tracking-[0.3em] mb-6 flex items-center gap-2">
                        <span class="w-1.5 h-1.5 bg-secondary rounded-full"></span>
                        Zambia HQ
                    </h4>
                    <p class="text-xs text-slate-400 mb-4">IT Solutions & Trade</p>
                    <div class="space-y-5">
                        <div class="flex gap-4 group">
                            <i class="fas fa-map-marker-alt text-secondary mt-1 group-hover:scale-110 transition-transform"></i>
                            <p class="text-sm text-slate-300">
                                Plot 10424/4, off Kasama Road,<br>
                                Libala South, Lusaka, Zambia
                            </p>
                        </div>
                        <div class="flex gap-4 group">
                            <i class="fas fa-phone-alt text-secondary mt-1 group-hover:scale-110 transition-transform"></i>
                            <a href="tel:+260977588581" class="text-sm font-bold text-white hover:text-secondary transition-colors">+260 97 7588581</a>
                        </div>
                        <div class="flex gap-4 group">
                            <i class="fas fa-envelope text-secondary mt-1 group-hover:scale-110 transition-transform"></i>
                            <a href="mailto:info@globaltechandtrade.com" class="text-sm font-bold text-white hover:text-secondary transition-colors">info@globaltechandtrade.com</a>
                        </div>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="lg:col-span-2">
                    <h4 class="text-xs font-black text-primary uppercase tracking-[0.3em] mb-8">Quick Links</h4>
                    <ul class="space-y-4 text-sm font-bold">
                        <li><a href="/it-solutions" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-primary text-xs group-hover:translate-x-1 transition-transform"></i>
                            IT Solutions
                        </a></li>
                        <li><a href="/import-export" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-secondary text-xs group-hover:translate-x-1 transition-transform"></i>
                            Import/Export
                        </a></li>
                        <li><a href="/mobile-app-development" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-primary text-xs group-hover:translate-x-1 transition-transform"></i>
                            Mobile Apps
                        </a></li>
                        <li><a href="/web-application-development" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-secondary text-xs group-hover:translate-x-1 transition-transform"></i>
                            Web Apps
                        </a></li>
                        <li><a href="/graphic-design" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-accent text-xs group-hover:translate-x-1 transition-transform"></i>
                            Graphic Design
                        </a></li>
                        <li><a href="/company-management" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-primary text-xs group-hover:translate-x-1 transition-transform"></i>
                            Company Management
                        </a></li>
                        <li><a href="/contact" class="text-primary hover:text-primary/80 transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-primary text-xs group-hover:translate-x-1 transition-transform"></i>
                            Contact Us
                        </a></li>
                    </ul>
                </div>
                
                <!-- Resources Column -->
                <div>
                    <h4 class="text-lg font-bold text-white mb-6 flex items-center gap-2">
                        <i class="fas fa-book text-green-400"></i>
                        Resources
                    </h4>
                    <ul class="space-y-3 text-slate-400">
                        <li><a href="/blog" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-green-400 text-xs group-hover:translate-x-1 transition-transform"></i>
                            Blog & Insights
                        </a></li>
                        <li><a href="/case-studies" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-green-400 text-xs group-hover:translate-x-1 transition-transform"></i>
                            Case Studies
                        </a></li>
                        <li><a href="/faq" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-green-400 text-xs group-hover:translate-x-1 transition-transform"></i>
                            FAQ
                        </a></li>
                        <li><a href="/growth-checklist" class="hover:text-white transition-colors flex items-center gap-2 group">
                            <i class="fas fa-chevron-right text-green-400 text-xs group-hover:translate-x-1 transition-transform"></i>
                            Growth Checklist
                        </a></li>
                    </ul>
                </div>
            </div>

            <!-- Newsletter Signup -->
            <div class="mb-12 p-8 bg-slate-800/50 rounded-3xl border border-slate-700">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h5 class="text-white font-bold text-lg mb-2">Stay Updated</h5>
                        <p class="text-slate-400 text-sm">Get the latest news on IT innovations and trade opportunities</p>
                    </div>
                    <form action="https://formsubmit.co/info@globaltechandtrade.com" method="POST" class="flex gap-3" id="newsletter-form">
                        <input type="hidden" name="_subject" value="Newsletter Subscription">
                        <input type="hidden" name="_template" value="table">
                        <input type="hidden" name="_next" id="newsletter-next" value="">
                        <input type="hidden" name="_autoresponse" value="Thank you for subscribing to GlobalTechAndTrade newsletter! You'll receive updates on IT innovations and trade opportunities. ‚Äî GlobalTechAndTrade">
                        <input type="email" name="email" placeholder="Your email address"
                               class="flex-1 px-4 py-3 bg-slate-700 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all"
                               required>
                        <button type="submit"
                                class="px-6 py-3 gradient-bg text-white font-bold rounded-xl hover:shadow-lg hover:-translate-y-0.5 transition-all group">
                            <i class="fas fa-paper-plane group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Bottom Bar -->
            <div class="pt-8 border-t border-slate-800/50 flex flex-col md:flex-row justify-between items-center gap-6">
                <p class="text-slate-500 text-xs font-medium uppercase tracking-widest">
                    &copy; {{ current_year|default('2026') }} GlobalTechAndTrade Solutions Ltd. All rights reserved.
                </p>
                <div class="flex gap-8 text-[10px] font-black text-slate-500 uppercase tracking-widest">
                    <a href="/privacy-policy" class="hover:text-white transition-colors">Privacy Policy</a>
                    <a href="/terms" class="hover:text-white transition-colors">Terms of Service</a>
                    <a href="/faq" class="hover:text-white transition-colors">FAQ</a>
                    <a href="/contact" class="hover:text-white transition-colors">Contact</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button - positioned to left of chat button -->
    <button id="back-to-top" class="fixed bottom-4 right-20 sm:bottom-6 sm:right-24 w-10 h-10 sm:w-12 sm:h-12 gradient-bg text-white rounded-xl shadow-xl opacity-0 invisible transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl z-40">
        <i class="fas fa-arrow-up text-sm"></i>
    </button>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         EXIT-INTENT POPUP - Lead Capture
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="exit-popup" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 bg-dark/80 backdrop-blur-md">
        <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden animate-scale-in relative">
            <!-- Close Button -->
            <button id="exit-popup-close" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-slate-100 hover:bg-red-100 flex items-center justify-center text-slate-500 hover:text-red-500 transition-all z-10">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Header -->
            <div class="bg-gradient-to-r from-primary to-secondary p-6 text-center">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-white/20 flex items-center justify-center">
                    <i class="fas fa-gift text-3xl text-white"></i>
                </div>
                <h3 class="text-2xl font-black text-white mb-2">Wait! Don't Leave Empty-Handed</h3>
                <p class="text-white/80 text-sm">Get our FREE guide before you go</p>
            </div>
            
            <!-- Content -->
            <div class="p-6">
                <div class="bg-slate-50 rounded-2xl p-4 mb-6">
                    <div class="flex items-start gap-4">
                        <div class="w-16 h-20 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-file-pdf text-2xl text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-slate-900 mb-1">Free Download</h4>
                            <p class="text-sm text-slate-600 mb-2">"The Complete Guide to India-Africa Trade 2026"</p>
                            <ul class="text-xs text-slate-500 space-y-1">
                                <li><i class="fas fa-check text-green-500 mr-1"></i> Import/Export regulations</li>
                                <li><i class="fas fa-check text-green-500 mr-1"></i> Customs duty calculator</li>
                                <li><i class="fas fa-check text-green-500 mr-1"></i> Shipping route guide</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Form -->
                <form id="exit-popup-form" action="https://formsubmit.co/info@globaltechandtrade.com" method="POST">
                    <input type="hidden" name="_subject" value="Free Guide Download Request">
                    <input type="hidden" name="_template" value="table">
                    <input type="hidden" name="_next" id="exit-popup-next" value="">
                    <input type="hidden" name="_autoresponse" value="Thank you for downloading our India-Africa Trade Guide! Our team will send you the guide shortly. In the meantime, feel free to explore our services at globaltechandtrade.com ‚Äî GlobalTechAndTrade">
                    
                    <div class="space-y-3">
                        <input type="text" name="name" placeholder="Your Name" required
                               class="w-full px-4 py-3 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white outline-none transition-all text-slate-800 placeholder-slate-400">
                        <input type="email" name="email" placeholder="Your Email" required
                               class="w-full px-4 py-3 bg-slate-50 border-2 border-slate-100 rounded-xl focus:border-primary focus:bg-white outline-none transition-all text-slate-800 placeholder-slate-400">
                        <button type="submit" class="w-full py-4 bg-gradient-to-r from-accent to-orange-500 text-white font-bold rounded-xl hover:shadow-lg transition-all flex items-center justify-center gap-2">
                            <i class="fas fa-download"></i>
                            Get Free Guide Now
                        </button>
                    </div>
                </form>
                
                <p class="text-center text-xs text-slate-400 mt-4">
                    <i class="fas fa-lock mr-1"></i> We respect your privacy. Unsubscribe anytime.
                </p>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         STICKY WHATSAPP BUTTON (Enhanced)
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="fixed bottom-24 right-4 sm:bottom-28 sm:right-6 z-40 flex flex-col items-end gap-3">
        <!-- WhatsApp Button with Pulse -->
        <a href="https://wa.me/919027125341?text=Hello%20GlobalTechAndTrade!%20I%27m%20interested%20in%20your%20services." 
           target="_blank" rel="noopener"
           class="group relative w-14 h-14 bg-green-500 rounded-full flex items-center justify-center shadow-lg shadow-green-500/30 hover:bg-green-600 hover:scale-110 transition-all"
           title="Chat on WhatsApp">
            <!-- Pulse Ring -->
            <span class="absolute inset-0 rounded-full bg-green-500 animate-ping opacity-30"></span>
            <i class="fab fa-whatsapp text-white text-2xl relative z-10"></i>
            <!-- Tooltip -->
            <span class="absolute right-full mr-3 px-3 py-2 bg-slate-900 text-white text-xs font-semibold rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity shadow-lg">
                <span class="block">Chat with us!</span>
                <span class="block text-green-400 text-[10px]">Usually replies in minutes</span>
                <span class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1 w-2 h-2 bg-slate-900 rotate-45"></span>
            </span>
        </a>
        
        <!-- Quick Call Button -->
        <a href="tel:+919027125341" 
           class="group w-12 h-12 bg-primary rounded-full flex items-center justify-center shadow-lg hover:bg-primary/90 hover:scale-110 transition-all"
           title="Call Us">
            <i class="fas fa-phone-alt text-white text-lg"></i>
            <span class="absolute right-full mr-3 px-3 py-1.5 bg-slate-900 text-white text-xs font-semibold rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity">
                Call Now
                <span class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1 w-2 h-2 bg-slate-900 rotate-45"></span>
            </span>
        </a>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true,
            offset: 100
        });

        // Mobile menu toggle
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');
        if(btn && menu) {
            btn.addEventListener('click', () => {
                menu.classList.toggle('hidden');
                btn.classList.toggle('bg-primary');
                btn.classList.toggle('text-white');
            });
        }

        // Sticky Navbar with shadow
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            const backToTop = document.getElementById('back-to-top');

            if (window.scrollY > 20) {
                nav.classList.add('shadow-xl', 'bg-white/95');
                nav.classList.remove('bg-white/80');
            } else {
                nav.classList.remove('shadow-xl', 'bg-white/95');
                nav.classList.add('bg-white/80');
            }

            // Back to top button visibility
            if (window.scrollY > 500) {
                backToTop.style.opacity = '1';
                backToTop.style.visibility = 'visible';
            } else {
                backToTop.style.opacity = '0';
                backToTop.style.visibility = 'hidden';
            }
        });

        // Back to top functionality
        document.getElementById('back-to-top')?.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Auto-hide flash messages
        setTimeout(() => {
            document.querySelectorAll('[role="alert"]').forEach(el => {
                el.style.transition = 'opacity 0.5s ease';
                el.style.opacity = '0';
                setTimeout(() => el.remove(), 500);
            });
        }, 5000);

        // Loading spinner (you can trigger this with AJAX calls)
        function showLoading() {
            document.getElementById('loading-spinner').classList.remove('hidden');
            document.getElementById('loading-spinner').classList.add('flex');
        }

        function hideLoading() {
            document.getElementById('loading-spinner').classList.add('hidden');
            document.getElementById('loading-spinner').classList.remove('flex');
        }

        // Close mobile menu on window resize (if open)
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768 && menu && !menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
                btn.classList.remove('bg-primary', 'text-white');
            }
        });

        // Add active class to current page in mobile menu
        const currentPath = window.location.pathname;
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('text-primary', 'font-bold');
            }
        });

        // Book Free Demo modal: open
        document.querySelectorAll('.book-free-demo-trigger').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const modal = document.getElementById('book-demo-modal');
                const form = document.getElementById('book-demo-form');
                const successEl = document.getElementById('book-demo-success');
                if (modal) {
                    if (form) form.reset();
                    if (successEl) successEl.classList.add('hidden');
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                    document.body.style.overflow = 'hidden';
                    if (menu && !menu.classList.contains('hidden')) menu.classList.add('hidden');
                }
            });
        });

        // Book Free Demo modal: close
        function closeBookDemoModal() {
            const modal = document.getElementById('book-demo-modal');
            if (modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
                document.body.style.overflow = '';
            }
        }
        document.querySelectorAll('.book-demo-close').forEach(btn => {
            btn.addEventListener('click', closeBookDemoModal);
        });
        document.getElementById('book-demo-modal')?.addEventListener('click', function(e) {
            if (e.target === this) closeBookDemoModal();
        });

        // Book Free Demo form: normal submit so FormSubmit can send confirmation email to visitor (_autoresponse)
        document.getElementById('book-demo-form')?.addEventListener('submit', function() {
            var replyto = document.getElementById('demo-email');
            var replytoHidden = document.getElementById('demo-email-reply');
            var nextHidden = document.getElementById('demo-next');
            if (replyto && replytoHidden) replytoHidden.value = replyto.value;
            if (nextHidden) nextHidden.value = window.location.origin + window.location.pathname + '?demo=submitted';
            
            // Track form submission in Google Analytics
            gtag('event', 'form_submit', {
                'event_category': 'conversion',
                'event_label': 'Book Demo Form',
                'value': 1
            });
        });

        // Show thank-you message when returning after successful submission
        if (window.location.search.indexOf('demo=submitted') !== -1) {
            (function() {
                var wrap = document.createElement('div');
                wrap.className = 'fixed top-24 right-4 z-[70] max-w-sm';
                wrap.innerHTML = '<div class="bg-white border-l-4 border-primary rounded-lg shadow-2xl p-4 animate-slide-up flex items-start gap-3">' +
                    '<i class="fas fa-check-circle text-primary text-xl mt-0.5"></i>' +
                    '<div><p class="font-bold text-slate-800">Request received</p><p class="text-sm text-slate-600 mt-1">A confirmation has been sent to your email.</p></div>' +
                    '<button type="button" class="ml-auto text-slate-400 hover:text-slate-600" aria-label="Close">√ó</button></div>';
                wrap.querySelector('button').onclick = function() { wrap.remove(); history.replaceState({}, '', window.location.pathname); };
                document.body.appendChild(wrap);
                history.replaceState({}, '', window.location.pathname);
                setTimeout(function() { if (wrap.parentNode) { wrap.remove(); } }, 8000);
            })();
        }

        // Newsletter form: set redirect URL
        var newsletterForm = document.getElementById('newsletter-form');
        if (newsletterForm) {
            newsletterForm.addEventListener('submit', function() {
                var nextHidden = document.getElementById('newsletter-next');
                if (nextHidden) nextHidden.value = window.location.origin + '/?subscribed=true';
                
                // Track newsletter signup in Google Analytics
                gtag('event', 'newsletter_signup', {
                    'event_category': 'conversion',
                    'event_label': 'Newsletter Form',
                    'value': 1
                });
            });
        }

        // ========== EXIT-INTENT POPUP ==========
        (function() {
            var exitPopup = document.getElementById('exit-popup');
            var exitPopupClose = document.getElementById('exit-popup-close');
            var exitPopupForm = document.getElementById('exit-popup-form');
            var exitPopupShown = sessionStorage.getItem('exitPopupShown');
            
            // Only show once per session and not on mobile
            function showExitPopup() {
                if (exitPopupShown || window.innerWidth < 768) return;
                
                exitPopup.classList.remove('hidden');
                exitPopup.classList.add('flex');
                document.body.style.overflow = 'hidden';
                sessionStorage.setItem('exitPopupShown', 'true');
            }
            
            function closeExitPopup() {
                exitPopup.classList.add('hidden');
                exitPopup.classList.remove('flex');
                document.body.style.overflow = '';
            }
            
            // Exit intent detection (mouse leaves viewport at top)
            document.addEventListener('mouseout', function(e) {
                if (e.clientY < 10 && e.relatedTarget === null) {
                    setTimeout(showExitPopup, 500);
                }
            });
            
            // Also show after 60 seconds on page (backup)
            setTimeout(function() {
                if (!sessionStorage.getItem('exitPopupShown')) {
                    showExitPopup();
                }
            }, 60000);
            
            // Close handlers
            if (exitPopupClose) {
                exitPopupClose.addEventListener('click', closeExitPopup);
            }
            exitPopup.addEventListener('click', function(e) {
                if (e.target === exitPopup) closeExitPopup();
            });
            
            // Manual triggers (for download buttons)
            document.querySelectorAll('.exit-popup-trigger').forEach(function(btn) {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    exitPopup.classList.remove('hidden');
                    exitPopup.classList.add('flex');
                    document.body.style.overflow = 'hidden';
                });
            });
            
            // Form submission
            if (exitPopupForm) {
                exitPopupForm.addEventListener('submit', function() {
                    var nextHidden = document.getElementById('exit-popup-next');
                    if (nextHidden) nextHidden.value = window.location.origin + '/?guide=requested';
                    
                    // Track in GA
                    if (typeof gtag !== 'undefined') {
                        gtag('event', 'lead_magnet_download', {
                            'event_category': 'conversion',
                            'event_label': 'India-Africa Trade Guide',
                            'value': 1
                        });
                    }
                });
            }
        })();
        
        // Show thank-you for guide download
        if (window.location.search.indexOf('guide=requested') !== -1) {
            (function() {
                var wrap = document.createElement('div');
                wrap.className = 'fixed top-24 right-4 z-[70] max-w-sm';
                wrap.innerHTML = '<div class="bg-white border-l-4 border-green-500 rounded-lg shadow-2xl p-4 flex items-start gap-3">' +
                    '<i class="fas fa-check-circle text-green-500 text-xl mt-0.5"></i>' +
                    '<div><p class="font-bold text-slate-800">Guide Request Received!</p><p class="text-sm text-slate-600 mt-1">Check your email for the download link.</p></div>' +
                    '<button type="button" class="ml-auto text-slate-400 hover:text-slate-600" aria-label="Close">√ó</button></div>';
                wrap.querySelector('button').onclick = function() { wrap.remove(); history.replaceState({}, '', window.location.pathname); };
                document.body.appendChild(wrap);
                history.replaceState({}, '', window.location.pathname);
                setTimeout(function() { if (wrap.parentNode) wrap.remove(); }, 8000);
            })();
        }

        // Show thank-you message for newsletter subscription
        if (window.location.search.indexOf('subscribed=true') !== -1) {
            (function() {
                var wrap = document.createElement('div');
                wrap.className = 'fixed top-24 right-4 z-[70] max-w-sm';
                wrap.innerHTML = '<div class="bg-white border-l-4 border-green-500 rounded-lg shadow-2xl p-4 animate-slide-up flex items-start gap-3">' +
                    '<i class="fas fa-envelope-open-text text-green-500 text-xl mt-0.5"></i>' +
                    '<div><p class="font-bold text-slate-800">Subscribed!</p><p class="text-sm text-slate-600 mt-1">You\'ll receive our latest updates.</p></div>' +
                    '<button type="button" class="ml-auto text-slate-400 hover:text-slate-600" aria-label="Close">√ó</button></div>';
                wrap.querySelector('button').onclick = function() { wrap.remove(); history.replaceState({}, '', window.location.pathname); };
                document.body.appendChild(wrap);
                history.replaceState({}, '', window.location.pathname);
                setTimeout(function() { if (wrap.parentNode) { wrap.remove(); } }, 8000);
            })();
        }
    </script>

    <!-- Extra Scripts Block -->
    {% block extra_scripts %}{% endblock %}

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         AI CHATBOT - Auto replies based on website content
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <style>
        /* Chatbot - Force into own rendering layer */
        #chat-window {
            width: calc(100vw - 16px);
            max-width: 380px;
            transform-style: preserve-3d;
            perspective: 1000px;
            -webkit-transform-style: preserve-3d;
        }
        .chatbot-container {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.9);
            border: 3px solid #1e3a5f;
            transform: translateZ(1px);
            -webkit-transform: translateZ(1px);
        }
        #chat-messages {
            scrollbar-width: thin;
            scrollbar-color: #3b82f6 #c7ccd4;
        }
        #chat-messages::-webkit-scrollbar { width: 6px; }
        #chat-messages::-webkit-scrollbar-track { background: #c7ccd4; }
        #chat-messages::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 3px; }
        
        /* Mobile-first responsive design */
        @media (max-width: 480px) {
            #chat-window {
                width: calc(100vw - 16px);
                max-width: none;
                left: 8px;
                right: 8px;
                bottom: 80px !important;
            }
            #chat-toggle {
                bottom: 16px !important;
                right: 16px !important;
            }
            #chat-messages {
                height: 180px !important;
            }
            #chat-input {
                font-size: 16px !important; /* Prevents zoom on iOS */
                padding: 12px 16px !important;
                min-height: 48px !important;
            }
            #chat-form button[type="submit"] {
                width: 48px !important;
                height: 48px !important;
            }
            .quick-reply-btn {
                padding: 10px 14px !important;
                font-size: 13px !important;
            }
        }
        
        /* Tablet */
        @media (min-width: 481px) and (max-width: 768px) {
            #chat-window {
                width: 340px;
                bottom: 90px !important;
                right: 16px !important;
            }
            #chat-messages {
                height: 220px !important;
            }
        }
        
        /* Desktop */
        @media (min-width: 769px) {
            #chat-window {
                width: 380px;
                bottom: 96px !important;
                right: 24px !important;
            }
            #chat-messages {
                height: 250px !important;
            }
        }
    </style>

    <!-- Chat Backdrop Overlay (dims background when chat is open) -->
    <div id="chat-backdrop" class="fixed inset-0 hidden" style="background: rgba(0,0,0,0.6); z-index: 99998 !important;"></div>

    <!-- Chat Toggle Button - Mobile Optimized -->
    <button id="chat-toggle" class="fixed w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center shadow-2xl hover:scale-110 active:scale-95 transition-all duration-300 bottom-4 right-4 sm:bottom-6 sm:right-6" style="z-index: 2147483647 !important;">
        <i class="fas fa-comments text-white text-xl sm:text-2xl" id="chat-icon-open"></i>
        <i class="fas fa-times text-white text-xl sm:text-2xl hidden" id="chat-icon-close"></i>
        <span class="absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-red-500 rounded-full border-2 border-white animate-pulse" id="chat-notification"></span>
    </button>

    <!-- Chat Window Container - translateZ forces GPU layer -->
    <div id="chat-window" class="fixed origin-bottom-right transition-transform duration-300" style="transform: scale(0); display: none; z-index: 2147483647 !important; isolation: isolate; contain: layout paint;">
        
        <!-- SOLID BACKGROUND CONTAINER with shadow and border -->
        <div class="chatbot-container rounded-2xl overflow-hidden" style="background-color: #ffffff !important; background: #ffffff !important; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.1) !important; border: 2px solid #e5e7eb !important;">
            
            <!-- Chat Header with Close Button -->
            <div style="background-color: #0052CC !important; padding: 12px 16px;">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: #3b82f6 !important;">
                            <i class="fas fa-robot text-xl text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-white text-sm sm:text-base">GTT Assistant</h4>
                            <p class="text-xs flex items-center gap-1 text-blue-200">
                                <span class="w-2 h-2 bg-green-400 rounded-full"></span> AI Powered
                            </p>
                        </div>
                    </div>
                    <button onclick="closeChat()" class="w-8 h-8 rounded-full flex items-center justify-center text-white/80 hover:text-white hover:bg-white/20 transition-all active:scale-95" title="Close chat">
                        <i class="fas fa-times text-lg"></i>
                    </button>
                </div>
            </div>

            <!-- Chat Messages - Fixed height with scroll -->
            <div id="chat-messages" class="overflow-y-auto p-3 space-y-3" style="height: 200px; background-color: #c7ccd4 !important;">
                <div class="flex gap-2">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0" style="background-color: #93c5fd !important;">
                        <i class="fas fa-robot text-blue-700 text-sm"></i>
                    </div>
                    <div class="rounded-2xl rounded-tl-none p-3 max-w-[85%]" style="background-color: white !important; box-shadow: 0 2px 4px rgba(0,0,0,0.15);">
                        <p class="text-sm text-gray-700">Hi! üëã I'm GTT Assistant. Ask me anything about our IT Solutions or Import/Export services!</p>
                    </div>
                </div>
            </div>

            <!-- Quick Replies - Mobile Optimized -->
            <div id="quick-replies" class="p-3 border-t border-gray-300" style="background-color: white !important;">
            <p class="text-xs text-slate-500 mb-2">How can we help?</p>
            <div class="flex flex-wrap gap-2">
                <button onclick="startDemoBooking()" class="quick-reply-btn px-3 py-2 sm:py-1.5 text-white text-sm sm:text-xs font-medium rounded-full transition-all active:scale-95 shadow-sm" style="background: linear-gradient(135deg, #f97316, #ef4444);">üìÖ Book Demo</button>
                <button onclick="startLeadQualification('it')" class="quick-reply-btn px-3 py-2 sm:py-1.5 text-white text-sm sm:text-xs font-medium rounded-full transition-all active:scale-95 shadow-sm" style="background: linear-gradient(135deg, #0052CC, #003D99);">üíª IT Project</button>
                <button onclick="startLeadQualification('trade')" class="quick-reply-btn px-3 py-2 sm:py-1.5 text-white text-sm sm:text-xs font-medium rounded-full transition-all active:scale-95 shadow-sm" style="background: linear-gradient(135deg, #FF6B35, #FF8C00);">üö¢ Trade Quote</button>
                <button onclick="requestHumanAgent()" class="quick-reply-btn px-3 py-2 sm:py-1.5 text-white text-sm sm:text-xs font-medium rounded-full transition-all active:scale-95 shadow-sm" style="background: linear-gradient(135deg, #8B5CF6, #6D28D9);">üë§ Talk to Human</button>
                <button onclick="connectToWhatsApp()" class="quick-reply-btn px-3 py-2 sm:py-1.5 text-white text-sm sm:text-xs font-medium rounded-full transition-all active:scale-95 shadow-sm" style="background: #25D366;">üí¨ WhatsApp</button>
            </div>
        </div>

            <!-- Chat Input - Mobile Optimized -->
            <div class="p-3 sm:p-4 border-t border-gray-300" style="background-color: white !important;">
                <form id="chat-form" class="flex gap-2 items-center">
                    <input type="text" id="chat-input" placeholder="Type your message..."
                           autocomplete="off"
                           class="flex-1 px-4 py-3 sm:py-2 rounded-full text-base sm:text-sm outline-none focus:ring-2 focus:ring-blue-400 transition-all border-2 border-gray-300 focus:border-blue-500" 
                           style="background-color: #f3f4f6 !important; min-height: 44px; -webkit-appearance: none; appearance: none;">
                    <button type="submit" class="w-12 h-12 sm:w-10 sm:h-10 text-white rounded-full flex items-center justify-center transition-all flex-shrink-0 shadow-lg active:scale-95" style="background: linear-gradient(to bottom right, #2563eb, #1d4ed8) !important;">
                        <i class="fas fa-paper-plane text-base sm:text-sm" style="color: white !important;"></i>
                    </button>
                </form>
                <p class="text-xs text-gray-400 mt-2 text-center sm:hidden">Tap to type your question</p>
            </div>

            <!-- Book Demo Link -->
            <div class="p-2 border-t border-gray-300 text-center" style="background-color: #c7ccd4 !important;">
            <a href="#" class="book-free-demo-trigger text-xs text-primary hover:text-blue-700 font-semibold transition-colors">
                <i class="fas fa-calendar-check mr-1"></i> Book a Free Consultation
            </a>
            </div>
            
        </div><!-- End of solid background container -->
    </div>

    <script>
    (function() {
        var chatToggle = document.getElementById('chat-toggle');
        var chatWindow = document.getElementById('chat-window');
        var chatBackdrop = document.getElementById('chat-backdrop');
        var chatForm = document.getElementById('chat-form');
        var chatInput = document.getElementById('chat-input');
        var chatMessages = document.getElementById('chat-messages');
        var iconOpen = document.getElementById('chat-icon-open');
        var iconClose = document.getElementById('chat-icon-close');
        var notification = document.getElementById('chat-notification');
        var isOpen = false;
        
        // Demo Booking State
        var demoBooking = {
            active: false,
            step: 0,
            data: {
                name: '',
                email: '',
                phone: '',
                company: '',
                service: '',
                message: ''
            }
        };
        
        var demoSteps = [
            { field: 'name', question: "Great! Let's book your free demo. üìÖ\n\nWhat's your **full name**?" },
            { field: 'email', question: "Nice to meet you, {name}! üëã\n\nWhat's your **email address**?" },
            { field: 'phone', question: "Got it! üìß\n\nWhat's your **phone number** (with country code)?" },
            { field: 'company', question: "Perfect! üì±\n\nWhat's your **company name**? (or type 'Individual' if personal)" },
            { field: 'service', question: "Great! üè¢\n\nWhich **service** are you interested in?\n\n‚Ä¢ Mobile App Development\n‚Ä¢ Web Development\n‚Ä¢ Custom Software/ERP\n‚Ä¢ E-Commerce\n‚Ä¢ Import/Export\n‚Ä¢ IT Consulting\n‚Ä¢ Other" },
            { field: 'message', question: "Excellent choice! ‚ú®\n\nAny **specific requirements** or questions you'd like to discuss? (or type 'None')" }
        ];

        // Gemini AI Configuration
        var GEMINI_API_KEY = 'AIzaSyA_6Tln-e_ULzDub_xRw12KraDFKnwCx50';
        var GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent';
        
        // Company context for Gemini AI - Comprehensive knowledge base
        var companyContext = `You are GTT Assistant, the official AI chatbot for GlobalTech&Trade (GTT). You are knowledgeable, professional, friendly, and helpful.

=== COMPANY OVERVIEW ===
GlobalTech&Trade is a dual-expertise company bridging technology and international trade.
- Founded: 2021
- Projects Completed: 50+
- Countries Served: 12+
- Client Satisfaction: 98%
- Unique Value: We combine IT Solutions with Import/Export services under one roof

=== IT SOLUTIONS (Detailed) ===

1. MOBILE APP DEVELOPMENT
   - Platforms: iOS (Swift), Android (Kotlin), Cross-platform (React Native, Flutter)
   - App Types: E-commerce, Food Delivery, Ride-sharing, Healthcare, EdTech, Enterprise
   - Process: Strategy ‚Üí UI/UX Design ‚Üí Development ‚Üí QA Testing ‚Üí Launch ‚Üí Maintenance
   - Timeline: 6-12 weeks depending on complexity
   - We handle: App Store/Play Store submission, push notifications, analytics integration

2. WEB APPLICATION DEVELOPMENT
   - Frontend: React, Vue.js, Angular, Next.js
   - Backend: Node.js, Python/Django, PHP/Laravel, Ruby on Rails
   - Databases: PostgreSQL, MongoDB, MySQL
   - Cloud: AWS, Google Cloud, Azure, Docker
   - Types: E-commerce platforms, SaaS applications, Customer portals, Corporate websites, Business dashboards, API development
   - Timeline: 2-8 weeks depending on scope

3. CUSTOM SOFTWARE DEVELOPMENT
   - ERP Systems (Enterprise Resource Planning)
   - CRM Solutions (Customer Relationship Management)
   - Inventory Management Systems
   - Billing & Invoicing Software
   - Workflow Automation Tools
   - Business Intelligence Dashboards
   - Benefits: Tailored to your exact needs, scalable, integrates with existing systems

4. AI & AUTOMATION
   - AI Chatbots for customer support
   - Predictive Analytics for business insights
   - Robotic Process Automation (RPA)
   - Computer Vision solutions
   - Natural Language Processing (NLP)
   - Recommendation Engines
   - Use cases: E-commerce personalization, Manufacturing optimization, Healthcare diagnostics

5. CLOUD & INFRASTRUCTURE
   - Cloud Migration services
   - Infrastructure Management
   - DevOps & CI/CD pipelines
   - Backup & Disaster Recovery
   - Performance Optimization
   - Cloud Security
   - Platforms: AWS, Microsoft Azure, Google Cloud Platform

6. CYBERSECURITY
   - Security Audits & Assessments
   - Penetration Testing
   - Compliance Management (GDPR, ISO 27001, PCI-DSS)
   - Security Monitoring (SOC)
   - Identity & Access Management
   - Security Awareness Training

=== IMPORT/EXPORT SERVICES (Detailed) ===

1. PRODUCT SOURCING & PROCUREMENT
   - Source from: India, China, Southeast Asia (Vietnam, Thailand, Malaysia, Indonesia, Bangladesh)
   - Products: Industrial Machinery, Electronics & IT, Textiles & Apparel, Pharmaceuticals, Auto Parts, Construction Materials, Food & Beverages, Chemicals
   - Process: Requirement Analysis ‚Üí Supplier Identification ‚Üí Verification ‚Üí Sample & Negotiation ‚Üí Quality Inspection ‚Üí Order Management
   - We have 500+ verified suppliers in our network
   - Average cost savings: 30% through direct sourcing

2. CUSTOMS CLEARANCE & COMPLIANCE
   - HS Code Classification
   - Duty Optimization (FTA utilization, duty drawback, exemption schemes)
   - Documentation (Bill of Entry, Shipping Bill, Certificates of Origin)
   - Import & Export Clearance
   - Compliance & Audit support
   - Coverage: All major ports in India (JNPT Mumbai, Chennai, Mundra, Kolkata, Cochin) and Africa (Dar es Salaam, Mombasa, Durban, Beira)
   - Average clearance time: 24 hours

3. FREIGHT FORWARDING & LOGISTICS
   - Sea Freight: FCL (Full Container), LCL (Less than Container), Breakbulk, Reefer containers
   - Air Freight: Express cargo, Consolidated shipments, Charter services
   - Road & Rail: Cross-border trucking, Last-mile delivery
   - Transit time: Sea 18-25 days, Air 2-5 days
   - Value-added: Warehousing, Consolidation, Cold Chain, GPS Tracking, Hazmat handling

4. TRADE FINANCE & PAYMENT SOLUTIONS
   - Letters of Credit (LC): Sight, Usance, Confirmed, Standby, Revolving
   - Documentary Collection: D/P (Documents against Payment), D/A (Documents against Acceptance)
   - Invoice Factoring: Up to 90% advance on export invoices
   - Supply Chain Finance: Reverse factoring, Dynamic discounting
   - Bank Guarantees: Bid bonds, Performance guarantees
   - Forex Services: Spot transactions, Forward contracts, Currency hedging

5. CARGO INSURANCE & RISK PROTECTION
   - Coverage Types: ICC (C) Basic, ICC (B) Standard, ICC (A) Comprehensive/All-Risk
   - Covers: Fire, Water damage, Theft, Collision, Natural disasters, Breakage, Non-delivery
   - Premium rates: 0.5-2% of cargo value
   - Claims assistance included

6. TRADE DOCUMENTATION
   - Commercial Invoice, Packing List, Bill of Lading
   - Certificate of Origin (Preferential & Non-preferential)
   - Phytosanitary Certificate, Health Certificates
   - Inspection Certificates, Insurance Certificate
   - Export Licenses & Permits
   - We ensure zero discrepancy for LC compliance

=== TRADE CORRIDORS ===
- India ‚Üí Africa: Pharmaceuticals, Industrial Machinery, Textiles, IT Equipment, Agri-tech (Transit: 18-22 days)
- Africa ‚Üí India: Raw Minerals, Precious Metals, Agricultural Products, Gemstones (Transit: 20-24 days)

=== OFFICE LOCATIONS ===

INDIA HQ (Asia Operations):
- Address: Sector 63, Noida, Uttar Pradesh 201301, India
- Phone: +91 9027125341
- Hours: Monday-Saturday, 9:00 AM - 6:00 PM IST

ZAMBIA HQ (Africa Operations):
- Address: Plot #10424/4, Cassanova Court, Chainama, Lusaka, Zambia
- Phone: +260 977 588 581
- Hours: Monday-Friday, 8:00 AM - 5:00 PM CAT

Email: info@globaltechandtrade.com
Website: www.globaltechandtrade.com

=== PRICING POLICY ===
We provide customized quotes based on project requirements. We do NOT share fixed prices in chat. Always encourage users to book a FREE consultation for accurate pricing.

=== RESPONSE GUIDELINES ===
1. Be helpful, professional, and friendly
2. Use emojis sparingly (1-2 per response max)
3. Keep responses concise (under 100 words unless detailed explanation needed)
4. Always offer to help further or suggest booking a consultation
5. If asked about competitors, focus on GTT's strengths instead
6. For technical questions, provide accurate information from the context above
7. If unsure, suggest booking a consultation with our experts
8. Never make up information not in this context`;

        // Comprehensive responses based on GlobalTechAndTrade services
        var responses = {
            // Services Overview
            'services': 'üöÄ **GlobalTech&Trade Services**\n\n**IT Solutions:**\n‚Ä¢ Mobile App Development\n‚Ä¢ Web Application Development\n‚Ä¢ Custom Software & ERP/CRM\n‚Ä¢ AI & Automation\n‚Ä¢ Cloud & Infrastructure\n‚Ä¢ Cybersecurity\n\n**Trade Services:**\n‚Ä¢ Product Sourcing\n‚Ä¢ Customs Clearance\n‚Ä¢ Freight Forwarding\n‚Ä¢ Trade Finance\n‚Ä¢ Cargo Insurance\n‚Ä¢ Documentation\n\nWhich service interests you?',
            
            // Mobile Apps
            'mobile': 'üì± **Mobile App Development**\n\nWe build apps for:\n‚Ä¢ iOS (Swift) & Android (Kotlin)\n‚Ä¢ Cross-platform (React Native, Flutter)\n\n**App Types:** E-commerce, Food Delivery, Healthcare, EdTech, Enterprise\n\n**Timeline:** 6-12 weeks\n**Process:** Strategy ‚Üí Design ‚Üí Development ‚Üí Testing ‚Üí Launch\n\nWant to discuss your app idea? Book a FREE consultation!',
            
            // Web Development
            'web': 'üåê **Web Application Development**\n\nWe build:\n‚Ä¢ E-commerce Platforms\n‚Ä¢ SaaS Applications\n‚Ä¢ Customer Portals\n‚Ä¢ Corporate Websites\n‚Ä¢ Business Dashboards\n‚Ä¢ API Development\n\n**Tech Stack:** React, Vue.js, Node.js, Python, PostgreSQL, AWS\n\n**Timeline:** 2-8 weeks\n\nTell me about your project!',
            
            // Custom Software
            'software': 'üíº **Custom Software Development**\n\nWe build:\n‚Ä¢ ERP Systems\n‚Ä¢ CRM Solutions\n‚Ä¢ Inventory Management\n‚Ä¢ Billing & Invoicing\n‚Ä¢ Workflow Automation\n‚Ä¢ Business Intelligence\n\n**Benefits:** Tailored to your needs, scalable, integrates with existing systems\n\nBook a consultation to discuss your requirements!',
            
            // AI & Automation
            'ai': 'ü§ñ **AI & Automation**\n\nOur AI solutions:\n‚Ä¢ AI Chatbots (24/7 support)\n‚Ä¢ Predictive Analytics\n‚Ä¢ Process Automation (RPA)\n‚Ä¢ Computer Vision\n‚Ä¢ Natural Language Processing\n‚Ä¢ Recommendation Engines\n\n**Industries:** E-commerce, Manufacturing, Finance, Healthcare\n\nLet\'s discuss how AI can transform your business!',
            
            // Cloud
            'cloud': '‚òÅÔ∏è **Cloud & Infrastructure**\n\nOur services:\n‚Ä¢ Cloud Migration\n‚Ä¢ Infrastructure Management\n‚Ä¢ DevOps & CI/CD\n‚Ä¢ Backup & Disaster Recovery\n‚Ä¢ Performance Optimization\n‚Ä¢ Cloud Security\n\n**Platforms:** AWS, Azure, Google Cloud\n\nNeed cloud solutions? Let\'s talk!',
            
            // Cybersecurity
            'security': 'üîí **Cybersecurity Services**\n\nWe provide:\n‚Ä¢ Security Audits\n‚Ä¢ Penetration Testing\n‚Ä¢ Compliance (GDPR, ISO 27001)\n‚Ä¢ Security Monitoring\n‚Ä¢ Identity & Access Management\n‚Ä¢ Security Training\n\nProtect your business - book a security assessment!',
            
            // Import Export
            'import': 'üö¢ **Import/Export Services**\n\nComplete trade solutions:\n‚Ä¢ Product Sourcing (India, China, SE Asia)\n‚Ä¢ Customs Clearance (24hr avg)\n‚Ä¢ Freight Forwarding (Sea, Air, Road)\n‚Ä¢ Trade Finance (LC, Invoice Factoring)\n‚Ä¢ Cargo Insurance\n‚Ä¢ Documentation\n\n**Corridors:** India ‚Üî Africa\n**Products:** Electronics, Machinery, Textiles, Pharma, Food\n\nWhat do you want to trade?',
            
            // Product Sourcing
            'sourcing': 'üîç **Product Sourcing**\n\nWe source from:\n‚Ä¢ India, China, Vietnam, Thailand, Malaysia\n\n**Products:**\n‚Ä¢ Industrial Machinery\n‚Ä¢ Electronics & IT\n‚Ä¢ Textiles & Apparel\n‚Ä¢ Pharmaceuticals\n‚Ä¢ Auto Parts\n‚Ä¢ Construction Materials\n\n**Network:** 500+ verified suppliers\n**Savings:** Up to 30% through direct sourcing\n\nTell us what you need!',
            
            // Customs
            'customs': 'üìã **Customs Clearance**\n\nOur services:\n‚Ä¢ HS Code Classification\n‚Ä¢ Duty Optimization\n‚Ä¢ Import/Export Documentation\n‚Ä¢ Compliance Support\n\n**Coverage:** All major ports in India & Africa\n**Avg Clearance:** 24 hours\n\nNeed customs help? Contact us!',
            
            // Freight
            'freight': 'üöõ **Freight Forwarding**\n\n**Modes:**\n‚Ä¢ Sea Freight (FCL/LCL) - 18-25 days\n‚Ä¢ Air Freight - 2-5 days\n‚Ä¢ Road & Rail\n\n**Value-Added:**\n‚Ä¢ Warehousing\n‚Ä¢ Cold Chain\n‚Ä¢ GPS Tracking\n‚Ä¢ Cargo Insurance\n\nGet a freight quote today!',
            
            // Trade Finance
            'finance': 'üí∞ **Trade Finance**\n\nOur solutions:\n‚Ä¢ Letters of Credit (LC)\n‚Ä¢ Documentary Collection\n‚Ä¢ Invoice Factoring (up to 90% advance)\n‚Ä¢ Supply Chain Finance\n‚Ä¢ Bank Guarantees\n‚Ä¢ Forex Services\n\nSecure your international transactions!',
            
            // Insurance
            'insurance': 'üõ°Ô∏è **Cargo Insurance**\n\n**Coverage Types:**\n‚Ä¢ ICC (C) - Basic\n‚Ä¢ ICC (B) - Standard\n‚Ä¢ ICC (A) - All-Risk\n\n**Covers:** Fire, Theft, Water damage, Natural disasters, Breakage\n\n**Premium:** 0.5-2% of cargo value\n\nProtect your shipments - get a quote!',
            
            // Documentation
            'documentation': 'üìÑ **Trade Documentation**\n\nWe handle:\n‚Ä¢ Commercial Invoice & Packing List\n‚Ä¢ Bill of Lading\n‚Ä¢ Certificate of Origin\n‚Ä¢ Phytosanitary Certificates\n‚Ä¢ Health Certificates\n‚Ä¢ Export Licenses\n\nZero discrepancy guarantee for LC compliance!',
            
            // Quote/Pricing
            'price': 'üìã **Get a Custom Quote**\n\nWe provide customized quotes based on your specific requirements.\n\n**IT Projects:** Depends on scope & complexity\n**Trade Services:** Based on volume, route & product\n\nFor accurate pricing, book a FREE consultation!\n\nüìÖ Click "Book Demo" below to schedule a call.',
            
            // Contact
            'contact': 'üìû **Contact Us**\n\n**Email:** info@globaltechandtrade.com\n\n**India Office:**\nüìç Sector 63, Noida, UP 201301\nüìû +91 9027125341\nüïê Mon-Sat: 9AM-6PM IST\n\n**Zambia Office:**\nüìç Chainama, Lusaka\nüìû +260 977 588 581\nüïê Mon-Fri: 8AM-5PM CAT',
            
            // Location
            'location': 'üåç **Our Offices**\n\n**India HQ (Asia):**\nüìç Sector 63, Noida, UP 201301\nüìû +91 9027125341\nüïê Mon-Sat: 9AM-6PM IST\n\n**Zambia HQ (Africa):**\nüìç Plot #10424/4, Cassanova Court, Chainama, Lusaka\nüìû +260 977 588 581\nüïê Mon-Fri: 8AM-5PM CAT\n\nWe serve India, Africa & Middle East!',
            
            // About
            'about': 'üè¢ **About GlobalTech&Trade**\n\nWe are a dual-expertise company:\n\n**IT Solutions:** Mobile Apps, Web Development, Custom Software, AI, Cloud, Cybersecurity\n\n**Trade Services:** Import/Export, Sourcing, Customs, Freight, Finance\n\n**Stats:**\n‚Ä¢ Founded: 2021\n‚Ä¢ Projects: 50+\n‚Ä¢ Countries: 12+\n‚Ä¢ Satisfaction: 98%\n\nBridging technology and trade!',
            
            // Timeline
            'timeline': '‚è±Ô∏è **Project Timelines**\n\n**IT Projects:**\n‚Ä¢ Landing Page: 1-2 weeks\n‚Ä¢ Business Website: 2-4 weeks\n‚Ä¢ E-Commerce: 4-8 weeks\n‚Ä¢ Mobile App: 6-12 weeks\n‚Ä¢ Custom Software: 3-6 months\n\n**Trade:**\n‚Ä¢ Sea Freight: 18-25 days\n‚Ä¢ Air Freight: 2-5 days\n‚Ä¢ Customs: 24 hours avg\n\nTimelines vary by complexity.',
            
            // Technologies
            'tech': 'üíª **Our Tech Stack**\n\n**Frontend:** React, Vue.js, Angular, Next.js\n**Backend:** Node.js, Python, PHP, Ruby\n**Mobile:** React Native, Flutter, Swift, Kotlin\n**Database:** PostgreSQL, MongoDB, MySQL\n**Cloud:** AWS, Azure, Google Cloud\n**AI/ML:** TensorFlow, PyTorch\n\nWe choose the best tech for your needs!',
            
            // Support
            'support': 'üõ†Ô∏è **Support & Maintenance**\n\n‚Ä¢ **Free Support:** 3 months after delivery\n‚Ä¢ **AMC Plans:** Annual maintenance contracts\n‚Ä¢ **24/7 Support:** For critical issues\n‚Ä¢ **Updates:** Regular security & feature updates\n‚Ä¢ **Training:** User training included\n\nWe never abandon our clients!',
            
            // Greetings
            'hello': 'Hello! üëã Welcome to GlobalTech&Trade!\n\nI\'m GTT Assistant, here to help you with:\n‚Ä¢ IT Solutions (Apps, Web, Software, AI)\n‚Ä¢ Trade Services (Import/Export, Logistics)\n\nWhat can I help you with today?',
            'hi': 'Hi there! üëã Great to see you!\n\nI\'m GTT Assistant. Ask me about:\n‚Ä¢ Mobile & Web Development\n‚Ä¢ Custom Software & AI\n‚Ä¢ Import/Export Services\n‚Ä¢ Product Sourcing\n\nHow can I help?',
            'hey': 'Hey! üëã Welcome to GlobalTech&Trade!\n\nWhat would you like to know about our IT solutions or trade services?',
            
            // Thanks
            'thank': 'You\'re welcome! üòä\n\nIs there anything else I can help you with?\n\nFeel free to book a FREE consultation for detailed discussion!',
            
            // Bye
            'bye': 'Goodbye! üëã Thank you for visiting GlobalTech&Trade.\n\n**Contact us anytime:**\nüìß info@globaltechandtrade.com\nüìû +91 9027125341\n\nHave a great day!',
            
            // Demo/Consultation
            'demo': 'üìÖ **Book Free Consultation**\n\nGet a FREE 30-minute consultation:\n‚Ä¢ Discuss your requirements\n‚Ä¢ Get expert advice\n‚Ä¢ Receive a custom quote\n‚Ä¢ No commitment required\n\nClick "Book a Free Consultation" below or call:\nüìû India: +91 9027125341\nüìû Zambia: +260 977 588 581',
            
            // ERP/CRM
            'erp': 'üìä **ERP & CRM Solutions**\n\nWe build custom:\n‚Ä¢ ERP Systems (Finance, HR, Inventory, Production)\n‚Ä¢ CRM Solutions (Sales, Marketing, Support)\n‚Ä¢ Integrated Business Platforms\n\n**Benefits:**\n‚Ä¢ Tailored to your workflow\n‚Ä¢ Scalable architecture\n‚Ä¢ Integration with existing tools\n\nLet\'s discuss your requirements!',
            
            // Ecommerce
            'ecommerce': 'üõí **E-Commerce Development**\n\nWe build:\n‚Ä¢ Custom E-commerce Platforms\n‚Ä¢ Shopify/WooCommerce Solutions\n‚Ä¢ B2B & B2C Marketplaces\n‚Ä¢ Mobile Commerce Apps\n\n**Features:** Payment integration, Inventory management, Analytics\n\nReady to sell online? Let\'s talk!',
            
            // Default
            'default': 'I\'m here to help! ü§î\n\nYou can ask me about:\n‚Ä¢ **IT Services** - Apps, Web, Software, AI\n‚Ä¢ **Trade Services** - Import/Export, Logistics\n‚Ä¢ **Quote** - Get custom pricing\n‚Ä¢ **Contact** - Reach our team\n\nOr book a free consultation to speak with our experts!'
        };

        function openChat() {
            chatBackdrop.classList.remove('hidden');
            chatBackdrop.style.zIndex = '2147483646';
            chatWindow.style.display = 'block';
            chatWindow.style.zIndex = '2147483647';
            chatToggle.style.zIndex = '2147483647';
            
            // Force solid background on all elements
            var container = chatWindow.querySelector('.chatbot-container');
            if (container) {
                container.style.backgroundColor = '#ffffff';
                container.style.background = '#ffffff';
            }
            setTimeout(function() { chatWindow.style.transform = 'scale(1)'; }, 10);
            iconOpen.classList.add('hidden');
            iconClose.classList.remove('hidden');
            notification.classList.add('hidden');
            isOpen = true;
        }

        chatToggle.addEventListener('click', function() {
            if (isOpen) { closeChat(); } else { openChat(); }
        });

        chatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            var message = chatInput.value.trim();
            if (!message) return;
            addMessage(message, 'user');
            chatInput.value = '';
            processMessage(message);
        });

        window.sendQuickReply = function(message) {
            addMessage(message, 'user');
            processMessage(message);
        };

        function processMessage(message) {
            // Show typing indicator
            var typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'flex gap-2';
            typingDiv.innerHTML = '<div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0"><i class="fas fa-robot text-primary text-sm"></i></div><div class="bg-white rounded-2xl rounded-tl-none p-3 shadow-sm"><p class="text-sm text-slate-400"><i class="fas fa-circle text-xs animate-pulse"></i> Thinking...</p></div>';
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Check if demo booking is active
            if (demoBooking.active) {
                setTimeout(function() {
                    var typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();
                    handleDemoBookingStep(message);
                }, 600);
                return;
            }
            
            // Check if lead qualification is active
            if (leadQualification.active) {
                setTimeout(function() {
                    var typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();
                    handleLeadQualificationStep(message);
                }, 600);
                return;
            }

            // Check if user wants to book demo
            var msgLower = message.toLowerCase();
            if (msgLower.includes('book') || msgLower.includes('demo') || msgLower.includes('consultation') || 
                msgLower.includes('schedule') || msgLower.includes('appointment') || msgLower.includes('meeting')) {
                setTimeout(function() {
                    var typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();
                    startDemoBooking();
                }, 600);
                return;
            }

            // Check if user wants to talk to human
            if (msgLower.includes('human') || msgLower.includes('agent') || msgLower.includes('person') || msgLower.includes('real person') || msgLower.includes('talk to someone')) {
                setTimeout(function() {
                    var typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();
                    requestHumanAgent();
                }, 600);
                return;
            }

            // Try local response first for common questions
            var localResponse = getResponse(message);

            // If we have a local response, use it (faster)
            if (localResponse) {
                setTimeout(function() {
                    var typing = document.getElementById('typing-indicator');
                    if (typing) typing.remove();
                    addMessage(localResponse, 'bot');
                }, 800);
            } else {
                // Use Gemini AI for other questions
                callGeminiAI(message);
            }
        }
        
        function startDemoBooking() {
            demoBooking.active = true;
            demoBooking.step = 0;
            demoBooking.data = { name: '', email: '', phone: '', company: '', service: '', message: '' };
            addMessage(demoSteps[0].question, 'bot');
        }
        window.startDemoBooking = startDemoBooking;
        
        // Lead Qualification Flow
        var leadQualification = {
            active: false,
            type: '', // 'it' or 'trade'
            step: 0,
            data: {}
        };
        
        var itQualificationSteps = [
            { question: "Great! Let me help you find the right IT solution. üíª\n\nWhat type of project are you looking for?\n\n1Ô∏è‚É£ Mobile App\n2Ô∏è‚É£ Website/Web App\n3Ô∏è‚É£ E-Commerce Store\n4Ô∏è‚É£ Custom Software/ERP\n5Ô∏è‚É£ Not sure yet", field: 'projectType' },
            { question: "What's your project scope?\n\n1Ô∏è‚É£ Small (basic features)\n2Ô∏è‚É£ Medium (standard features)\n3Ô∏è‚É£ Large (complex features)\n4Ô∏è‚É£ Enterprise (full solution)\n5Ô∏è‚É£ Not sure yet", field: 'scope' },
            { question: "When do you need this completed?\n\n1Ô∏è‚É£ ASAP (within 1 month)\n2Ô∏è‚É£ 1-3 months\n3Ô∏è‚É£ 3-6 months\n4Ô∏è‚É£ Just exploring", field: 'timeline' }
        ];
        
        var tradeQualificationSteps = [
            { question: "Let me help you with your trade needs! üö¢\n\nWhat are you looking to do?\n\n1Ô∏è‚É£ Import goods to Africa\n2Ô∏è‚É£ Export from Africa\n3Ô∏è‚É£ Import to India\n4Ô∏è‚É£ General trade consulting", field: 'tradeType' },
            { question: "What type of products?\n\n1Ô∏è‚É£ Electronics\n2Ô∏è‚É£ Machinery/Equipment\n3Ô∏è‚É£ Textiles/Garments\n4Ô∏è‚É£ Food Products\n5Ô∏è‚É£ Other", field: 'productType' },
            { question: "What's your shipment size?\n\n1Ô∏è‚É£ Small (samples/parcels)\n2Ô∏è‚É£ Medium (LCL)\n3Ô∏è‚É£ Large (FCL container)\n4Ô∏è‚É£ Bulk/Regular shipments", field: 'shipmentSize' }
        ];
        
        function startLeadQualification(type) {
            leadQualification.active = true;
            leadQualification.type = type;
            leadQualification.step = 0;
            leadQualification.data = { type: type };
            
            var steps = type === 'it' ? itQualificationSteps : tradeQualificationSteps;
            addMessage(steps[0].question, 'bot');
            
            // Track in GA
            if (typeof gtag !== 'undefined') {
                gtag('event', 'lead_qualification_start', {
                    'event_category': 'engagement',
                    'event_label': type
                });
            }
        }
        window.startLeadQualification = startLeadQualification;
        
        function handleLeadQualificationStep(userInput) {
            var steps = leadQualification.type === 'it' ? itQualificationSteps : tradeQualificationSteps;
            var currentStep = steps[leadQualification.step];
            
            // Save the answer
            leadQualification.data[currentStep.field] = userInput;
            leadQualification.step++;
            
            if (leadQualification.step < steps.length) {
                // Ask next question
                addMessage(steps[leadQualification.step].question, 'bot');
            } else {
                // Qualification complete - provide recommendation
                leadQualification.active = false;
                var recommendation = getLeadRecommendation();
                addMessage(recommendation, 'bot');
                
                // Track completion
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'lead_qualification_complete', {
                        'event_category': 'conversion',
                        'event_label': leadQualification.type,
                        'value': 1
                    });
                }
            }
        }
        
        function getLeadRecommendation() {
            var data = leadQualification.data;
            var msg = "Thanks for the info! Based on your needs:\n\n";
            
            if (data.type === 'it') {
                msg += "‚úÖ **We can help with:** ";
                if (data.projectType && data.projectType.includes('Mobile')) {
                    msg += "**Mobile App Development** for iOS and Android\n\n";
                } else if (data.projectType && data.projectType.includes('E-Commerce')) {
                    msg += "**E-Commerce Solutions** to help you sell online\n\n";
                } else if (data.projectType && data.projectType.includes('Website')) {
                    msg += "**Professional Website Development**\n\n";
                } else {
                    msg += "A **Custom Solution** tailored to your needs\n\n";
                }
            } else {
                msg += "‚úÖ **We can help with:**\n";
                msg += "‚Ä¢ Freight forwarding & logistics\n";
                msg += "‚Ä¢ Customs clearance documentation\n";
                msg += "‚Ä¢ Product sourcing assistance\n\n";
            }
            
            msg += "üìÖ **Next Step:** Book a FREE 30-minute consultation with our experts!\n\n";
            msg += "Click **Book Demo** below or message us on WhatsApp for instant response.";
            
            return msg;
        }
        
        function connectToWhatsApp() {
            window.open('https://wa.me/919027125341?text=Hello%20GlobalTechAndTrade!%20I%27m%20interested%20in%20your%20services.', '_blank');
            addMessage("Opening WhatsApp... üí¨\n\nOur team typically responds within minutes during business hours!", 'bot');
        }
        window.connectToWhatsApp = connectToWhatsApp;

        // Human Agent Handoff
        function requestHumanAgent() {
            var currentHour = new Date().getHours();
            var isBusinessHours = (currentHour >= 9 && currentHour < 18);
            
            var msg = "üë§ **Connect with Our Team**\n\n";
            
            if (isBusinessHours) {
                msg += "Great! Our team is **currently available**. Choose how you'd like to connect:\n\n";
            } else {
                msg += "Our team is currently offline, but you can still reach us:\n\n";
            }
            
            msg += "üì± **WhatsApp (Fastest)**\n";
            msg += "[Chat on WhatsApp](https://wa.me/919027125341?text=Hi,%20I%20need%20to%20speak%20with%20someone%20from%20your%20team)\n\n";
            
            msg += "üìû **Call Us**\n";
            msg += "‚Ä¢ India: +91 9027125341\n";
            msg += "‚Ä¢ Zambia: +260 977 588 581\n\n";
            
            msg += "üìß **Email**\n";
            msg += "info@globaltechandtrade.com\n\n";
            
            if (isBusinessHours) {
                msg += "üí° **Tip:** WhatsApp usually gets the fastest response!";
            } else {
                msg += "‚è∞ **Business Hours:**\n";
                msg += "‚Ä¢ India: Mon-Sat, 9AM-6PM IST\n";
                msg += "‚Ä¢ Zambia: Mon-Fri, 8AM-5PM CAT\n\n";
                msg += "Leave a message and we'll respond first thing!";
            }
            
            addMessage(msg, 'bot');
            
            // Show contact options as buttons
            setTimeout(function() {
                var contactDiv = document.createElement('div');
                contactDiv.className = 'flex flex-wrap gap-2 justify-start ml-10 mb-4';
                contactDiv.innerHTML = 
                    '<a href="https://wa.me/919027125341?text=Hi,%20I%20need%20to%20speak%20with%20someone" target="_blank" class="px-4 py-2 bg-green-500 text-white text-xs font-bold rounded-full hover:bg-green-600 transition-all"><i class="fab fa-whatsapp mr-1"></i> WhatsApp</a>' +
                    '<a href="tel:+919027125341" class="px-4 py-2 bg-primary text-white text-xs font-bold rounded-full hover:bg-blue-600 transition-all"><i class="fas fa-phone mr-1"></i> Call India</a>' +
                    '<a href="tel:+260977588581" class="px-4 py-2 bg-secondary text-white text-xs font-bold rounded-full hover:bg-blue-700 transition-all"><i class="fas fa-phone mr-1"></i> Call Zambia</a>' +
                    '<a href="mailto:info@globaltechandtrade.com" class="px-4 py-2 bg-slate-600 text-white text-xs font-bold rounded-full hover:bg-slate-700 transition-all"><i class="fas fa-envelope mr-1"></i> Email</a>';
                chatMessages.appendChild(contactDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 500);
            
            // Track GA event
            if (typeof gtag !== 'undefined') {
                gtag('event', 'human_handoff_request', {
                    'event_category': 'chatbot',
                    'event_label': isBusinessHours ? 'business_hours' : 'after_hours'
                });
            }
        }
        window.requestHumanAgent = requestHumanAgent;
        
function handleDemoBookingStep(userInput) {
            var inputLower = userInput.toLowerCase().trim();
            
            // Check if user wants to cancel or exit (expanded list)
            var exitKeywords = ['cancel', 'stop', 'exit', 'quit', 'no', 'nevermind', 'never mind', 'back', 'menu', 'help', 'hi', 'hello', 'hey'];
            var isExitRequest = exitKeywords.some(function(keyword) {
                return inputLower === keyword || inputLower.startsWith(keyword + ' ');
            });
            
            // Also exit if user asks a question (contains ?)
            if (isExitRequest || inputLower.includes('?') || inputLower.includes('what') || inputLower.includes('how') || inputLower.includes('why') || inputLower.includes('who')) {
                demoBooking.active = false;
                demoBooking.step = 0;
                addMessage("No problem! Demo booking cancelled. üëç\n\nHow can I help you? You can:\n‚Ä¢ Ask about our **IT Solutions** or **Trade Services**\n‚Ä¢ Click **Book Demo** when you're ready\n‚Ä¢ Type **human** to talk to our team", 'bot');
                return;
            }

            // Validate and save current step
            var currentStep = demoSteps[demoBooking.step];
            var isValid = validateInput(currentStep.field, userInput);

            if (!isValid.valid) {
                // After 2 failed attempts, offer to exit
                if (!demoBooking.failCount) demoBooking.failCount = 0;
                demoBooking.failCount++;
                
                if (demoBooking.failCount >= 2) {
                    addMessage(isValid.message + "\n\nüí° **Tip:** Type **cancel** to exit booking, or **human** to talk to our team.", 'bot');
                    demoBooking.failCount = 0;
                } else {
                    addMessage(isValid.message, 'bot');
                }
                return;
            }
            
            // Reset fail count on success
            demoBooking.failCount = 0;
            
            // Save the input
            console.log('Saving field:', currentStep.field, 'value:', userInput);
            demoBooking.data[currentStep.field] = userInput;
            demoBooking.step++;
            
            // Check if all steps completed
            if (demoBooking.step >= demoSteps.length) {
                submitDemoBooking();
                return;
            }
            
            // Ask next question
            var nextQuestion = demoSteps[demoBooking.step].question;
            nextQuestion = nextQuestion.replace('{name}', demoBooking.data.name.split(' ')[0]);
            addMessage(nextQuestion, 'bot');
        }
        
        function validateInput(field, value) {
            value = value.trim();
            if (!value) {
                return { valid: false, message: "Please provide a valid response. üôè" };
            }
            
            if (field === 'email') {
                var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(value)) {
                    return { valid: false, message: "Please enter a valid email address (e.g., name@example.com) üìß" };
                }
            }
            
            if (field === 'phone') {
                var phoneRegex = /^[\+]?[\d\s\-\(\)]{8,}$/;
                if (!phoneRegex.test(value)) {
                    return { valid: false, message: "Please enter a valid phone number with country code (e.g., +91 9876543210) üì±" };
                }
            }
            
            if (field === 'name') {
                if (value.length < 2) {
                    return { valid: false, message: "Please enter your full name. üë§" };
                }
                // Prevent demo-related keywords from being used as name
                var nameLower = value.toLowerCase();
                if (nameLower.includes('book') || nameLower.includes('demo') || nameLower.includes('same') || 
                    nameLower === 'hi' || nameLower === 'hello' || nameLower === 'hey') {
                    return { valid: false, message: "Please enter your actual name (first and last name). üë§" };
                }
            }
            
            return { valid: true };
        }
        
        function submitDemoBooking() {
            demoBooking.active = false;
            
            // Save data before async call
            var savedData = {
                name: demoBooking.data.name,
                email: demoBooking.data.email,
                phone: demoBooking.data.phone,
                company: demoBooking.data.company,
                service: demoBooking.data.service,
                message: demoBooking.data.message
            };

            // Show confirmation message
            addMessage("üéâ **Perfect!** Let me submit your demo request...", 'bot');

            // Reset booking data now (before async)
            demoBooking.step = 0;
            demoBooking.data = { name: '', email: '', phone: '', company: '', service: '', message: '' };

            // Send via backend API (handles both company notification and visitor email)
            fetch('/api/send-demo-confirmation', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    name: savedData.name,
                    email: savedData.email,
                    phone: savedData.phone,
                    company: savedData.company,
                    service: savedData.service,
                    message: savedData.message || 'None'
                })
            })
            .then(function(response) { 
                return response.json(); 
            })
            .then(function(data) {
                console.log('API response:', data);
                setTimeout(function() {
                    addMessage("‚úÖ **Demo Booked Successfully!**\n\nüìã **Your Details:**\n‚Ä¢ Name: " + savedData.name + "\n‚Ä¢ Email: " + savedData.email + "\n‚Ä¢ Phone: " + savedData.phone + "\n‚Ä¢ Company: " + savedData.company + "\n‚Ä¢ Service: " + savedData.service + "\n\nüìß A confirmation email has been sent to **" + savedData.email + "**!\n\nüïê Our team will contact you within **24 hours** to schedule your demo.\n\nüìû Or call us directly:\n‚Ä¢ India: +91 9027125341\n‚Ä¢ Zambia: +260 977 588 581\n\nThank you for choosing GlobalTechAndTrade! üôè", 'bot');
                }, 1000);
            })
            .catch(function(error) {
                console.error('Demo submission error:', error);
                setTimeout(function() {
                    addMessage("‚ö†Ô∏è There was an issue submitting your request. But don't worry!\n\nüìß Please email us directly at **info@globaltechandtrade.com** with your details, or call:\nüìû India: +91 9027125341\nüìû Zambia: +260 977 588 581\n\nWe apologize for the inconvenience!", 'bot');
                }, 1000);
            });
        }

        async function callGeminiAI(message) {
            var typing = document.getElementById('typing-indicator');
            
            // Build a focused prompt for better responses
            var prompt = `${companyContext}

=== CURRENT USER QUESTION ===
"${message}"

=== YOUR TASK ===
Answer the user's question based ONLY on the company information provided above.

Rules:
1. Be helpful, accurate, and professional
2. Keep response under 80 words unless detailed explanation is needed
3. Use bullet points for lists
4. Add 1-2 relevant emojis
5. If the question is about pricing, say we provide custom quotes and suggest booking a consultation
6. If you don't have specific information, suggest booking a free consultation
7. Always end with a helpful follow-up question or call-to-action
8. Format important terms with **bold**

Response:`;

            try {
                var response = await fetch(GEMINI_API_URL + '?key=' + GEMINI_API_KEY, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: prompt }]
                        }],
                        generationConfig: {
                            temperature: 0.6,
                            maxOutputTokens: 250,
                            topP: 0.85,
                            topK: 40
                        },
                        safetySettings: [
                            { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
                            { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }
                        ]
                    })
                });

                if (!response.ok) {
                    throw new Error('API response not ok: ' + response.status);
                }

                var data = await response.json();
                if (typing) typing.remove();

                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    var aiResponse = data.candidates[0].content.parts[0].text;
                    // Clean up the response
                    aiResponse = aiResponse.trim();
                    if (aiResponse.startsWith('Response:')) {
                        aiResponse = aiResponse.substring(9).trim();
                    }
                    addMessage(aiResponse, 'bot');
                } else if (data.error) {
                    console.error('Gemini API error:', data.error);
                    var fallback = getSmartFallback(message);
                    addMessage(fallback || responses.default, 'bot');
                } else {
                    var fallback = getSmartFallback(message);
                    addMessage(fallback || responses.default, 'bot');
                }
            } catch (error) {
                console.error('Gemini API error:', error);
                if (typing) typing.remove();
                var fallback = getSmartFallback(message);
                addMessage(fallback || responses.default, 'bot');
            }
        }
        
        function getSmartFallback(message) {
            var msg = message.toLowerCase();
            
            // Conversational responses
            if (msg.includes('how are') || msg.includes('how r u') || msg.includes("how's it") || msg.includes('how do you do')) {
                return "I'm doing great, thank you for asking! üòä I'm here to help you learn about GlobalTech&Trade's services. What would you like to know - IT solutions or trade services?";
            }
            if (msg.includes('your name') || msg.includes('who are you') || msg.includes('what are you')) {
                return "I'm GTT Assistant, the AI helper for GlobalTech&Trade! ü§ñ I can tell you about our IT solutions (apps, web, software, AI) and import/export services. How can I help?";
            }
            if (msg.includes('joke') || msg.includes('funny')) {
                return "Why did the developer go broke? Because he used up all his cache! üòÑ Now, how can I help you with our services?";
            }
            if (msg.includes('weather')) {
                return "I don't have weather data, but it's always a great day to start a new project! ‚òÄÔ∏è Want to know about our IT solutions or trade services?";
            }
            if (msg.includes('love') || msg.includes('like you') || msg.includes('you are great') || msg.includes('you are good')) {
                return "Aww, thank you! üòä I'm happy to help! Would you like to know about our services or book a free consultation?";
            }
            if (msg.includes('can you help') || msg.includes('need help') || msg.includes('assist')) {
                return "Absolutely! I'm here to help! üôå\n\nI can assist you with:\n‚Ä¢ IT Solutions (Apps, Web, Software)\n‚Ä¢ Trade Services (Import/Export)\n‚Ä¢ Getting a Quote\n‚Ä¢ Booking a Consultation\n\nWhat do you need?";
            }
            if (msg.includes('human') || msg.includes('real person') || msg.includes('agent') || msg.includes('talk to someone')) {
                return "I understand you'd like to speak with our team! üë§\n\n**Contact us directly:**\nüìû India: +91 9027125341\nüìû Zambia: +260 977 588 581\nüìß info@globaltechandtrade.com\n\nOr click 'Book Demo' to schedule a call!";
            }
            if (msg.includes('not helpful') || msg.includes('wrong') || msg.includes('incorrect') || msg.includes("don't understand")) {
                return "I apologize if I wasn't helpful! üòî Let me try again, or you can:\n\n‚Ä¢ Rephrase your question\n‚Ä¢ Book a FREE consultation with our experts\n‚Ä¢ Contact us at +91 9027125341\n\nHow else can I assist you?";
            }
            if (msg.includes('ok') || msg.includes('okay') || msg.includes('alright') || msg.includes('i see') || msg.includes('got it')) {
                return "Great! üëç Is there anything else you'd like to know about our IT solutions or trade services?";
            }
            if (msg.includes('yes') || msg.includes('sure') || msg.includes('yeah')) {
                return "Perfect! What would you like to know more about? üòä\n\n‚Ä¢ IT Services\n‚Ä¢ Trade Services\n‚Ä¢ Get a Quote\n‚Ä¢ Book Consultation";
            }
            if (msg.includes('no') && msg.length < 10) {
                return "No problem! If you have any questions later, I'm here to help. üòä\n\nFeel free to reach us at info@globaltechandtrade.com anytime!";
            }
            
            // Return default response for truly unknown questions
            return "I'd be happy to help! ü§î\n\nCould you please tell me more about what you're looking for?\n\n‚Ä¢ IT Solutions (Apps, Web, Software, AI)\n‚Ä¢ Trade Services (Import/Export, Logistics)\n‚Ä¢ Pricing & Quotes\n‚Ä¢ Contact Information\n\nOr book a FREE consultation with our experts!";
        }

        function addMessage(text, type) {
            var div = document.createElement('div');
            div.className = 'flex gap-2 ' + (type === 'user' ? 'justify-end' : '');
            if (type === 'bot') {
                var formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
                div.innerHTML = '<div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0"><i class="fas fa-robot text-primary text-sm"></i></div><div class="bg-white rounded-2xl rounded-tl-none p-3 shadow-sm max-w-[80%]"><p class="text-sm text-slate-700">' + formattedText + '</p></div>';
            } else {
                div.innerHTML = '<div class="bg-primary text-white rounded-2xl rounded-tr-none p-3 shadow-sm max-w-[80%]"><p class="text-sm">' + text + '</p></div>';
            }
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getResponse(message) {
            var msg = message.toLowerCase();
            
            // Greetings (check first for quick response)
            if (msg === 'hi' || msg === 'hello' || msg === 'hey' || msg === 'hii' || msg === 'hiii') {
                if (msg.includes('hello')) return responses.hello;
                if (msg.includes('hey')) return responses.hey;
                return responses.hi;
            }
            if (msg.includes('good morning') || msg.includes('good afternoon') || msg.includes('good evening')) return responses.hello;
            
            // TRADE SERVICES - Check these FIRST before general "services" keyword
            // Trade services specific
            if (msg.includes('trade service') || msg.includes('trade solution') || msg.includes('trading service')) return responses.import;
            
            // Import/Export General
            if (msg.includes('import') || msg.includes('export') || msg.includes('international trade')) return responses.import;
            
            // Product Sourcing (moved up)
            if (msg.includes('sourcing') || msg.includes('supplier') || msg.includes('manufacturer') || msg.includes('procurement') || msg.includes('source product') || msg.includes('find product')) return responses.sourcing;
            if (msg.includes('china') || msg.includes('vietnam') || msg.includes('thailand') || msg.includes('malaysia')) return responses.sourcing;
            
            // Customs (moved up)
            if (msg.includes('customs') || msg.includes('clearance') || msg.includes('duty') || msg.includes('tariff') || msg.includes('hs code') || msg.includes('import duty')) return responses.customs;
            
            // Freight (moved up)
            if (msg.includes('freight') || msg.includes('shipping') || msg.includes('logistics') || msg.includes('cargo') || msg.includes('container') || msg.includes('fcl') || msg.includes('lcl')) return responses.freight;
            if (msg.includes('sea freight') || msg.includes('air freight') || msg.includes('ocean') || msg.includes('ship')) return responses.freight;
            
            // Trade Finance (moved up)
            if (msg.includes('letter of credit') || msg.includes(' lc ') || msg.includes('trade finance') || msg.includes('factoring') || msg.includes('bank guarantee') || msg.includes('payment term')) return responses.finance;
            
            // Insurance (moved up)
            if (msg.includes('insurance') || msg.includes('cargo insurance') || msg.includes('coverage') || msg.includes('protect shipment') || msg.includes('icc')) return responses.insurance;
            
            // Documentation (moved up)
            if (msg.includes('documentation') || msg.includes('bill of lading') || msg.includes('certificate of origin') || msg.includes('commercial invoice') || msg.includes('packing list')) return responses.documentation;
            
            // Check for "trade" keyword alone (after specific trade services)
            if (msg.includes('trade') && !msg.includes('tech')) return responses.import;
            
            // IT SERVICES - Check these after trade
            // IT services specific
            if (msg.includes('it service') || msg.includes('it solution') || msg.includes('software service') || msg.includes('tech service')) return responses.services;
            
            // Mobile Apps
            if (msg.includes('mobile') || msg.includes('ios') || msg.includes('android') || msg.includes('flutter') || msg.includes('react native') || msg.includes('native app')) return responses.mobile;
            if (msg === 'app' || msg.includes('app development') || msg.includes('build app') || msg.includes('create app') || msg.includes('make app')) return responses.mobile;
            
            // Web Development
            if (msg.includes('website') || msg.includes('web app') || msg.includes('web development') || msg.includes('web application') || msg.includes('portal') || msg.includes('landing page')) return responses.web;
            if (msg.includes('react') || msg.includes('vue') || msg.includes('angular') || msg.includes('node') || msg.includes('next.js') || msg.includes('frontend') || msg.includes('backend')) return responses.web;
            
            // E-commerce
            if (msg.includes('ecommerce') || msg.includes('e-commerce') || msg.includes('online store') || msg.includes('online shop') || msg.includes('shopify') || msg.includes('woocommerce') || msg.includes('marketplace')) return responses.ecommerce;
            
            // Custom Software / ERP / CRM
            if (msg.includes('erp') || msg.includes('crm') || msg.includes('enterprise') || msg.includes('inventory') || msg.includes('billing') || msg.includes('invoicing')) return responses.erp;
            if (msg.includes('custom software') || msg.includes('software development') || msg.includes('bespoke') || msg.includes('tailor')) return responses.software;
            
            // AI & Automation
            if (msg.includes('ai') || msg.includes('artificial intelligence') || msg.includes('machine learning') || msg.includes('ml') || msg.includes('automation') || msg.includes('rpa') || msg.includes('chatbot') || msg.includes('bot')) return responses.ai;
            if (msg.includes('predictive') || msg.includes('analytics') || msg.includes('nlp') || msg.includes('computer vision')) return responses.ai;
            
            // Cloud
            if (msg.includes('cloud') || msg.includes('aws') || msg.includes('azure') || msg.includes('google cloud') || msg.includes('gcp') || msg.includes('devops') || msg.includes('infrastructure') || msg.includes('hosting')) return responses.cloud;
            if (msg.includes('migration') || msg.includes('docker') || msg.includes('kubernetes') || msg.includes('ci/cd')) return responses.cloud;
            
            // Cybersecurity
            if (msg.includes('security') || msg.includes('cyber') || msg.includes('hack') || msg.includes('penetration') || msg.includes('audit') || msg.includes('compliance') || msg.includes('gdpr') || msg.includes('iso')) return responses.security;
            
            // General Services Overview (check LAST after specific services)
            if (msg.includes('service') || msg.includes('offer') || msg.includes('what do you do') || msg.includes('what can you do') || msg.includes('help me') || msg.includes('what you provide')) return responses.services;
            
            // Pricing
            if (msg.includes('price') || msg.includes('cost') || msg.includes('charge') || msg.includes('fee') || msg.includes('budget') || msg.includes('quote') || msg.includes('how much') || msg.includes('rate') || msg.includes('pricing')) return responses.price;
            
            // Contact
            if (msg.includes('contact') || msg.includes('email') || msg.includes('phone') || msg.includes('call') || msg.includes('reach') || msg.includes('whatsapp') || msg.includes('number')) return responses.contact;
            
            // Location
            if (msg.includes('location') || msg.includes('office') || msg.includes('address') || msg.includes('where are you') || msg.includes('based')) return responses.location;
            if (msg.includes('india') || msg.includes('zambia') || msg.includes('noida') || msg.includes('lusaka') || msg.includes('africa')) return responses.location;
            
            // About
            if (msg.includes('about') || msg.includes('company') || msg.includes('who are you') || msg.includes('tell me about') || msg.includes('what is gtt') || msg.includes('globaltech')) return responses.about;
            
            // Timeline
            if (msg.includes('timeline') || msg.includes('how long') || msg.includes('duration') || msg.includes('deadline') || msg.includes('delivery time') || msg.includes('turnaround')) return responses.timeline;
            if (msg.includes('when can') || msg.includes('how many days') || msg.includes('how many weeks')) return responses.timeline;
            
            // Technologies
            if (msg.includes('technology') || msg.includes('tech stack') || msg.includes('programming') || msg.includes('language') || msg.includes('framework') || msg.includes('tool')) return responses.tech;
            if (msg.includes('python') || msg.includes('javascript') || msg.includes('java') || msg.includes('php') || msg.includes('ruby')) return responses.tech;
            
            // Support
            if (msg.includes('support') || msg.includes('maintenance') || msg.includes('after delivery') || msg.includes('warranty') || msg.includes('amc')) return responses.support;
            
            // Demo/Consultation
            if (msg.includes('demo') || msg.includes('consultation') || msg.includes('meeting') || msg.includes('book') || msg.includes('schedule') || msg.includes('appointment')) return responses.demo;
            
            // Thanks
            if (msg.includes('thank') || msg.includes('thanks') || msg.includes('thx') || msg.includes('appreciate')) return responses.thank;
            if (msg.includes('great') || msg.includes('awesome') || msg.includes('perfect') || msg.includes('excellent') || msg.includes('good job') || msg.includes('well done')) return responses.thank;

            // Bye
            if (msg.includes('bye') || msg.includes('goodbye') || msg.includes('see you') || msg.includes('take care') || msg.includes('later')) return responses.bye;
            
            // Common questions
            if (msg.includes('work with') || msg.includes('partner') || msg.includes('collaborate')) return responses.about;
            if (msg.includes('portfolio') || msg.includes('case study') || msg.includes('previous work') || msg.includes('example')) return 'We have completed 50+ projects across IT and Trade! üìÇ\n\nVisit our Case Studies page to see our work, or book a consultation to discuss specific examples relevant to your industry.\n\nWant me to help you book a call?';
            if (msg.includes('payment') || msg.includes('pay') || msg.includes('accept')) return 'We accept various payment methods including bank transfer, LC, and milestone-based payments. üí≥\n\nPayment terms are discussed during project scoping. Book a consultation to discuss your preferred arrangement!';

            // For everything else, return null to trigger Gemini AI
            return null;
        }

        // Auto-open after 5 seconds on every page refresh
        setTimeout(function() {
            if (!isOpen) {
                openChat();
            }
        }, 5000);

        // Close chat function - exposed globally for header close button
        window.closeChat = function() {
            chatWindow.style.transform = 'scale(0)';
            chatBackdrop.classList.add('hidden');
            setTimeout(function() { chatWindow.style.display = 'none'; }, 300);
            iconOpen.classList.remove('hidden');
            iconClose.classList.add('hidden');
            isOpen = false;
        };

        // Close chat when clicking on backdrop
        chatBackdrop.addEventListener('click', function() {
            window.closeChat();
        });
    })();
    </script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         COOKIE CONSENT BANNER
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="cookie-consent" class="fixed bottom-0 left-0 right-0 z-[55] bg-slate-900 text-white p-4 transform translate-y-full transition-transform duration-500" style="display: none;">
        <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-3">
                <i class="fas fa-cookie-bite text-2xl text-amber-400"></i>
                <p class="text-sm">
                    We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies.
                    <a href="/privacy-policy" class="text-primary hover:underline ml-1">Learn more</a>
                </p>
            </div>
            <div class="flex gap-3">
                <button onclick="acceptCookies()" class="px-6 py-2 bg-primary hover:bg-blue-600 text-white text-sm font-bold rounded-lg transition-colors">
                    Accept
                </button>
                <button onclick="declineCookies()" class="px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white text-sm font-bold rounded-lg transition-colors">
                    Decline
                </button>
            </div>
        </div>
    </div>

    <script>
        // Cookie Consent
        function acceptCookies() {
            localStorage.setItem('cookieConsent', 'accepted');
            document.getElementById('cookie-consent').style.transform = 'translateY(100%)';
            setTimeout(() => document.getElementById('cookie-consent').style.display = 'none', 500);
        }
        function declineCookies() {
            localStorage.setItem('cookieConsent', 'declined');
            document.getElementById('cookie-consent').style.transform = 'translateY(100%)';
            setTimeout(() => document.getElementById('cookie-consent').style.display = 'none', 500);
        }
        // Show cookie banner if not already answered
        if (!localStorage.getItem('cookieConsent')) {
            setTimeout(() => {
                const banner = document.getElementById('cookie-consent');
                banner.style.display = 'block';
                setTimeout(() => banner.style.transform = 'translateY(0)', 100);
            }, 2000);
        }
    </script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         LANGUAGE SELECTOR
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script>
    (function() {
        var langBtn = document.getElementById('lang-btn');
        var langMenu = document.getElementById('lang-menu');
        var currentLang = document.getElementById('current-lang');
        var langOptions = document.querySelectorAll('.lang-option');
        
        if (!langBtn || !langMenu) return;
        
        var langLabels = { en: 'EN', fr: 'FR', sw: 'SW', hi: 'HI' };
        
        // Load saved language
        var savedLang = localStorage.getItem('preferredLanguage') || 'en';
        currentLang.textContent = langLabels[savedLang] || 'EN';
        
        // Toggle dropdown
        langBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            // Close resources menu if open
            var resourcesMenu = document.getElementById('resources-menu');
            if (resourcesMenu) resourcesMenu.classList.add('hidden');
            // Toggle lang menu
            langMenu.classList.toggle('hidden');
        });
        
        // Prevent closing when clicking inside lang menu
        langMenu.addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        // Close on outside click
        document.addEventListener('click', function(e) {
            if (!langBtn.contains(e.target) && !langMenu.contains(e.target)) {
                langMenu.classList.add('hidden');
            }
        });
        
        // Resources dropdown
        var resourcesBtn = document.getElementById('resources-btn');
        var resourcesMenu = document.getElementById('resources-menu');
        if (resourcesBtn && resourcesMenu) {
            resourcesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                resourcesMenu.classList.toggle('hidden');
                langMenu.classList.add('hidden');
            });
            
            // Don't close when clicking inside the menu (let links work)
            resourcesMenu.addEventListener('click', function(e) {
                // Allow link clicks to navigate
                if (e.target.tagName === 'A') {
                    return; // Let the link work
                }
                e.stopPropagation();
            });
        }
        
        // Handle language selection
        langOptions.forEach(function(option) {
            option.addEventListener('click', function() {
                var lang = this.getAttribute('data-lang');
                localStorage.setItem('preferredLanguage', lang);
                currentLang.textContent = langLabels[lang];
                langMenu.classList.add('hidden');
                
                // Show notification
                showLangNotification(lang);
                
                // Track with GA
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'language_change', {
                        'event_category': 'engagement',
                        'event_label': lang
                    });
                }
            });
        });
        
        function showLangNotification(lang) {
            var messages = {
                en: 'Language preference saved: English',
                fr: 'Pr√©f√©rence de langue enregistr√©e: Fran√ßais',
                sw: 'Upendeleo wa lugha umehifadhiwa: Kiswahili',
                hi: '‡§≠‡§æ‡§∑‡§æ ‡§µ‡§∞‡•Ä‡§Ø‡§§‡§æ ‡§∏‡§π‡•á‡§ú‡•Ä ‡§ó‡§à: ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä'
            };
            
            var note = document.createElement('div');
            note.className = 'fixed top-24 right-4 z-50 px-4 py-3 bg-green-500 text-white text-sm font-semibold rounded-lg shadow-lg';
            note.style.transition = 'opacity 0.3s, transform 0.3s';
            note.innerHTML = '<i class="fas fa-check-circle mr-2"></i>' + messages[lang];
            document.body.appendChild(note);
            
            setTimeout(function() {
                note.style.opacity = '0';
                note.style.transform = 'translateY(-20px)';
                setTimeout(function() { note.remove(); }, 300);
            }, 2500);
        }
    })();
    </script>
    
    <!-- Fix any extra white space at bottom -->
    <style>
    html, body {
        overflow-x: hidden;
        max-width: 100vw;
    }
    body {
        min-height: 100vh;
        top: 0 !important;
        position: relative !important;
    }
    /* Hide any Google Translate remnants */
    .goog-te-banner-frame,
    .skiptranslate,
    #goog-gt-tt,
    .goog-te-balloon-frame,
    iframe[id^="goog-"],
    iframe.goog-te-menu-frame,
    .goog-te-gadget,
    #google_translate_element {
        display: none !important;
        height: 0 !important;
        width: 0 !important;
        visibility: hidden !important;
        position: absolute !important;
        top: -9999px !important;
        left: -9999px !important;
    }
    /* Ensure footer is at bottom */
    footer {
        position: relative;
    }
    </style>
    
    <!-- Clear Google Translate cookies -->
    <script>
    (function() {
        // Clear any Google Translate cookies that might be causing issues
        document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
        document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.' + window.location.hostname;
        document.cookie = 'googtrans=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=' + window.location.hostname;
        
        // Remove any dynamically added Google Translate elements
        var gtElements = document.querySelectorAll('.skiptranslate, .goog-te-banner-frame, iframe[src*="translate.google"]');
        gtElements.forEach(function(el) {
            el.parentNode && el.parentNode.removeChild(el);
        });
    })();
    </script>
</body>
</html>

